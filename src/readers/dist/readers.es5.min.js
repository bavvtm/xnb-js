/** 
 * xnb.js 1.3.5
 * made by Lybell( https://github.com/lybell-art/ )
 * This library is based on the XnbCli made by Leonblade.
 * 
 * xnb.js is licensed under the LGPL 3.0 License.
 * 
 * Libsquish license : MIT
 * -----------------------------------------------------------------------------
 *		Copyright (c) 2006 Simon Brown               si@sjbrown.co.uk
 *		Permission is hereby granted, free of charge, to any person obtaining
 *		a copy of this software and associated documentation files (the 
 *		"Software"), to	deal in the Software without restriction, including
 *		without limitation the rights to use, copy, modify, merge, publish,
 *		distribute, sublicense, and/or sell copies of the Software, and to 
 *		permit persons to whom the Software is furnished to do so, subject to 
 *		the following conditions:
 *		The above copyright notice and this permission notice shall be included
 *		in all copies or substantial portions of the Software.
 *		THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *		OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 *		MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *		IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 *		CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 *		TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 *		SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *		
 *	--------------------------------------------------------------------------
*/

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).XNB={})}(this,function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,n=function(t){try{return!!t()}catch(t){return!0}},i=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}),u=function(t){return t&&t.Math===Math&&t},o=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof e&&e)||u("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a="object"==typeof document&&document.all,s=void 0===a&&void 0!==a?function(t){return"function"==typeof t||t===a}:function(t){return"function"==typeof t},c=s,l=function(t){return"object"==typeof t?null!==t:c(t)},f=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),h=f,y=Function.prototype,v=y.call,p=h&&y.bind.bind(v,v),d=h?p:function(t){return function(){return v.apply(t,arguments)}},w=function(t){return null==t},m=w,g=TypeError,k=function(t){if(m(t))throw new g("Can't call method on "+t);return t},b=k,_=Object,x=function(t){return _(b(t))},T=x,S=d({}.hasOwnProperty),O=Object.hasOwn||function(t,e){return S(T(t),e)},M={exports:{}},A=o,z=Object.defineProperty,V=function(t,e){try{z(A,t,{value:e,configurable:!0,writable:!0})}catch(r){A[t]=e}return e},R=o,j=V,I="__core-js_shared__",E=M.exports=R[I]||j(I,{});(E.versions||(E.versions=[])).push({version:"3.43.0",mode:"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"});var C,P,F=M.exports,B=function(t,e){return F[t]||(F[t]=e||{})},U=d,X=0,D=Math.random(),L=U(1.1.toString),W=function(t){return"Symbol("+(void 0===t?"":t)+")_"+L(++X+D,36)},N=o.navigator,G=N&&N.userAgent,q=o,Y=G?String(G):"",K=q.process,J=q.Deno,H=K&&K.versions||J&&J.version,$=H&&H.v8;$&&(P=(C=$.split("."))[0]>0&&C[0]<4?1:+(C[0]+C[1])),!P&&Y&&(!(C=Y.match(/Edge\/(\d+)/))||C[1]>=74)&&(C=Y.match(/Chrome\/(\d+)/))&&(P=+C[1]);var Z=P,Q=n,tt=o.String,et=!!Object.getOwnPropertySymbols&&!Q(function(){var t=Symbol("symbol detection");return!tt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Z&&Z<41}),rt=et&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,nt=B,it=O,ut=W,ot=et,at=rt,st=o.Symbol,ct=nt("wks"),lt=at?st.for||st:st&&st.withoutSetter||ut,ft=function(t){return it(ct,t)||(ct[t]=ot&&it(st,t)?st[t]:lt("Symbol."+t)),ct[t]},ht={};ht[ft("toStringTag")]="z";var yt="[object z]"===String(ht),vt=d,pt=vt({}.toString),dt=vt("".slice),wt=function(t){return dt(pt(t),8,-1)},mt=yt,gt=s,kt=wt,bt=ft("toStringTag"),_t=Object,xt="Arguments"===kt(function(){return arguments}()),Tt=mt?kt:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=_t(t),bt))?r:xt?kt(e):"Object"===(n=kt(e))&&gt(e.callee)?"Arguments":n},St=String,Ot=function(t){try{return St(t)}catch(t){return"Object"}},Mt={},At=l,zt=o.document,Vt=At(zt)&&At(zt.createElement),Rt=function(t){return Vt?zt.createElement(t):{}},jt=!i&&!n(function(){return 7!==Object.defineProperty(Rt("div"),"a",{get:function(){return 7}}).a}),It=i&&n(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Et=l,Ct=String,Pt=TypeError,Ft=f,Bt=Function.prototype.call,Ut=Ft?Bt.bind(Bt):function(){return Bt.apply(Bt,arguments)},Xt=o,Dt=s,Lt=function(t,e){return arguments.length<2?(r=Xt[t],Dt(r)?r:void 0):Xt[t]&&Xt[t][e];var r},Wt=d({}.isPrototypeOf),Nt=Lt,Gt=s,qt=Wt,Yt=Object,Kt=rt?function(t){return"symbol"==typeof t}:function(t){var e=Nt("Symbol");return Gt(e)&&qt(e.prototype,Yt(t))},Jt=s,Ht=Ot,$t=TypeError,Zt=function(t){if(Jt(t))return t;throw new $t(Ht(t)+" is not a function")},Qt=Zt,te=w,ee=Ut,re=s,ne=l,ie=TypeError,ue=Ut,oe=l,ae=Kt,se=function(t,e){var r=t[e];return te(r)?void 0:Qt(r)},ce=function(t,e){var r,n;if("string"===e&&re(r=t.toString)&&!ne(n=ee(r,t)))return n;if(re(r=t.valueOf)&&!ne(n=ee(r,t)))return n;if("string"!==e&&re(r=t.toString)&&!ne(n=ee(r,t)))return n;throw new ie("Can't convert object to primitive value")},le=TypeError,fe=ft("toPrimitive"),he=function(t,e){if(!oe(t)||ae(t))return t;var r,n=se(t,fe);if(n){if(void 0===e&&(e="default"),r=ue(n,t,e),!oe(r)||ae(r))return r;throw new le("Can't convert object to primitive value")}return void 0===e&&(e="number"),ce(t,e)},ye=Kt,ve=i,pe=jt,de=It,we=function(t){if(Et(t))return t;throw new Pt(Ct(t)+" is not an object")},me=function(t){var e=he(t,"string");return ye(e)?e:e+""},ge=TypeError,ke=Object.defineProperty,be=Object.getOwnPropertyDescriptor,_e="enumerable",xe="configurable",Te="writable";Mt.f=ve?de?function(t,e,r){if(we(t),e=me(e),we(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Te in r&&!r[Te]){var n=be(t,e);n&&n[Te]&&(t[e]=r.value,r={configurable:xe in r?r[xe]:n[xe],enumerable:_e in r?r[_e]:n[_e],writable:!1})}return ke(t,e,r)}:ke:function(t,e,r){if(we(t),e=me(e),we(r),pe)try{return ke(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new ge("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Se=Mt,Oe=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Me=i?function(t,e,r){return Se.f(t,e,Oe(1,r))}:function(t,e,r){return t[e]=r,t},Ae={exports:{}},ze=i,Ve=O,Re=Function.prototype,je=ze&&Object.getOwnPropertyDescriptor,Ie=Ve(Re,"name"),Ee={EXISTS:Ie,PROPER:Ie&&"something"===function(){}.name,CONFIGURABLE:Ie&&(!ze||ze&&je(Re,"name").configurable)},Ce=d,Pe=s,Fe=M.exports,Be=Ce(Function.toString);Pe(Fe.inspectSource)||(Fe.inspectSource=function(t){return Be(t)});var Ue,Xe,De,Le=Fe.inspectSource,We=s,Ne=o.WeakMap,Ge=We(Ne)&&/native code/.test(String(Ne)),qe=W,Ye=B("keys"),Ke=function(t){return Ye[t]||(Ye[t]=qe(t))},Je=Ge,He=o,$e=l,Ze=Me,Qe=O,tr=M.exports,er=Ke,rr="Object already initialized",nr=He.TypeError,ir=He.WeakMap;if(Je||tr.state){var ur=tr.state||(tr.state=new ir);ur.get=ur.get,ur.has=ur.has,ur.set=ur.set,Ue=function(t,e){if(ur.has(t))throw new nr(rr);return e.facade=t,ur.set(t,e),e},Xe=function(t){return ur.get(t)||{}},De=function(t){return ur.has(t)}}else{var or=er("state");Ue=function(t,e){if(Qe(t,or))throw new nr(rr);return e.facade=t,Ze(t,or,e),e},Xe=function(t){return Qe(t,or)?t[or]:{}},De=function(t){return Qe(t,or)}}var ar={set:Ue,get:Xe,has:De,enforce:function(t){return De(t)?Xe(t):Ue(t,{})},getterFor:function(t){return function(e){var r;if(!$e(e)||(r=Xe(e)).type!==t)throw new nr("Incompatible receiver, "+t+" required");return r}}},sr=d,cr=n,lr=s,fr=O,hr=i,yr=Ee.CONFIGURABLE,vr=Le,pr=ar.enforce,dr=ar.get,wr=String,mr=Object.defineProperty,gr=sr("".slice),kr=sr("".replace),br=sr([].join),_r=hr&&!cr(function(){return 8!==mr(function(){},"length",{value:8}).length}),xr=String(String).split("String"),Tr=Ae.exports=function(t,e,r){"Symbol("===gr(wr(e),0,7)&&(e="["+kr(wr(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!fr(t,"name")||yr&&t.name!==e)&&(hr?mr(t,"name",{value:e,configurable:!0}):t.name=e),_r&&r&&fr(r,"arity")&&t.length!==r.arity&&mr(t,"length",{value:r.arity});try{r&&fr(r,"constructor")&&r.constructor?hr&&mr(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=pr(t);return fr(n,"source")||(n.source=br(xr,"string"==typeof e?e:"")),t};Function.prototype.toString=Tr(function(){return lr(this)&&dr(this).source||vr(this)},"toString");var Sr,Or,Mr,Ar=s,zr=Mt,Vr=Ae.exports,Rr=V,jr=Ae.exports,Ir=Mt,Er=function(t,e,r){return r.get&&jr(r.get,e,{getter:!0}),r.set&&jr(r.set,e,{setter:!0}),Ir.f(t,e,r)},Cr=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Pr=O,Fr=s,Br=x,Ur=Cr,Xr=Ke("IE_PROTO"),Dr=Object,Lr=Dr.prototype,Wr=Ur?Dr.getPrototypeOf:function(t){var e=Br(t);if(Pr(e,Xr))return e[Xr];var r=e.constructor;return Fr(r)&&e instanceof r?r.prototype:e instanceof Dr?Lr:null},Nr=d,Gr=Zt,qr=l,Yr=function(t){return qr(t)||null===t},Kr=String,Jr=TypeError,Hr=function(t,e,r){try{return Nr(Gr(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},$r=l,Zr=k,Qr=function(t){if(Yr(t))return t;throw new Jr("Can't set "+Kr(t)+" as a prototype")},tn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Hr(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return Zr(r),Qr(n),$r(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0),en=r,rn=i,nn=o,un=s,on=l,an=O,sn=Tt,cn=Ot,ln=Me,fn=function(t,e,r,n){n||(n={});var i=n.enumerable,u=void 0!==n.name?n.name:e;if(Ar(r)&&Vr(r,u,n),n.global)i?t[e]=r:Rr(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=r:zr.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},hn=Er,yn=Wt,vn=Wr,pn=tn,dn=ft,wn=W,mn=ar.enforce,gn=ar.get,kn=nn.Int8Array,bn=kn&&kn.prototype,_n=nn.Uint8ClampedArray,xn=_n&&_n.prototype,Tn=kn&&vn(kn),Sn=bn&&vn(bn),On=Object.prototype,Mn=nn.TypeError,An=dn("toStringTag"),zn=wn("TYPED_ARRAY_TAG"),Vn="TypedArrayConstructor",Rn=en&&!!pn&&"Opera"!==sn(nn.opera),jn=!1,In={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},En={BigInt64Array:8,BigUint64Array:8},Cn=function(t){var e=vn(t);if(on(e)){var r=gn(e);return r&&an(r,Vn)?r[Vn]:Cn(e)}},Pn=function(t){if(!on(t))return!1;var e=sn(t);return an(In,e)||an(En,e)};for(Sr in In)(Mr=(Or=nn[Sr])&&Or.prototype)?mn(Mr)[Vn]=Or:Rn=!1;for(Sr in En)(Mr=(Or=nn[Sr])&&Or.prototype)&&(mn(Mr)[Vn]=Or);if((!Rn||!un(Tn)||Tn===Function.prototype)&&(Tn=function(){throw new Mn("Incorrect invocation")},Rn))for(Sr in In)nn[Sr]&&pn(nn[Sr],Tn);if((!Rn||!Sn||Sn===On)&&(Sn=Tn.prototype,Rn))for(Sr in In)nn[Sr]&&pn(nn[Sr].prototype,Sn);if(Rn&&vn(xn)!==Sn&&pn(xn,Sn),rn&&!an(Sn,An))for(Sr in jn=!0,hn(Sn,An,{configurable:!0,get:function(){return on(this)?this[zn]:void 0}}),In)nn[Sr]&&ln(nn[Sr],zn,Sr);var Fn={NATIVE_ARRAY_BUFFER_VIEWS:Rn,TYPED_ARRAY_TAG:jn&&zn,aTypedArray:function(t){if(Pn(t))return t;throw new Mn("Target is not a typed array")},aTypedArrayConstructor:function(t){if(un(t)&&(!pn||yn(Tn,t)))return t;throw new Mn(cn(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(rn){if(r)for(var i in In){var u=nn[i];if(u&&an(u.prototype,t))try{delete u.prototype[t]}catch(r){try{u.prototype[t]=e}catch(t){}}}Sn[t]&&!r||fn(Sn,t,r?e:Rn&&bn[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(rn){if(pn){if(r)for(n in In)if((i=nn[n])&&an(i,t))try{delete i[t]}catch(t){}if(Tn[t]&&!r)return;try{return fn(Tn,t,r?e:Rn&&Tn[t]||e)}catch(t){}}for(n in In)!(i=nn[n])||i[t]&&!r||fn(i,t,e)}},getTypedArrayConstructor:Cn,isView:function(t){if(!on(t))return!1;var e=sn(t);return"DataView"===e||an(In,e)||an(En,e)},isTypedArray:Pn,TypedArray:Tn,TypedArrayPrototype:Sn},Bn=wt,Un=d,Xn=function(t){if("Function"===Bn(t))return Un(t)},Dn=Zt,Ln=f,Wn=Xn(Xn.bind),Nn=n,Gn=wt,qn=Object,Yn=d("".split),Kn=Nn(function(){return!qn("z").propertyIsEnumerable(0)})?function(t){return"String"===Gn(t)?Yn(t,""):qn(t)}:qn;function Jn(t,e,r){return e=ti(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ri()?Reflect.construct(e,r||[],ti(t).constructor):e.apply(t,r))}function Hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oi(n.key),n)}}function Zn(t,e,r){return e&&$n(t.prototype,e),r&&$n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qn(t,e,r){return(e=oi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ti(t){return ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ti(t)}function ei(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}function ri(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ri=function(){return!!t})()}function ni(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ni(Object(r),!0).forEach(function(e){Qn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ui(t,e){return ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ui(t,e)}function oi(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function ai(t){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ai(t)}function si(t,e){if(!t||"object"!==ai(t))throw new Error("Invalid Data!");for(var r=[],n=t.length,i=0;i<n;i++)r[i]=e(t[i],i);return r}function ci(t){return t<0?Math.ceil(t):Math.floor(t)}void 0!==Promise.allSettled&&Promise.allSettled.bind(Promise);var li=Math.ceil,fi=Math.floor,hi=ci||function(t){var e=+t;return(e>0?fi:li)(e)},yi=function(t){var e=+t;return e!=e||0===e?0:hi(e)},vi=Math.min,pi=function(t){var e=yi(t);return e>0?vi(e,9007199254740991):0},di=wt,wi=Array.isArray||function(t){return"Array"===di(t)},mi=d,gi=n,ki=s,bi=Tt,_i=Le,xi=function(){},Ti=Lt("Reflect","construct"),Si=/^\s*(?:class|function)\b/,Oi=mi(Si.exec),Mi=!Si.test(xi),Ai=function(t){if(!ki(t))return!1;try{return Ti(xi,[],t),!0}catch(t){return!1}},zi=function(t){if(!ki(t))return!1;switch(bi(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Mi||!!Oi(Si,_i(t))}catch(t){return!0}};zi.sham=!0;var Vi=!Ti||gi(function(){var t;return Ai(Ai.call)||!Ai(Object)||!Ai(function(){t=!0})||t})?zi:Ai,Ri=wi,ji=Vi,Ii=l,Ei=ft("species"),Ci=Array,Pi=function(t){var e;return Ri(t)&&(e=t.constructor,(ji(e)&&(e===Ci||Ri(e.prototype))||Ii(e)&&null===(e=e[Ei]))&&(e=void 0)),void 0===e?Ci:e},Fi=function(t,e){return Dn(t),void 0===e?t:Ln?Wn(t,e):function(){return t.apply(e,arguments)}},Bi=Kn,Ui=x,Xi=function(t){return pi(t.length)},Di=function(t,e){return new(Pi(t))(0===e?0:e)},Li=d([].push),Wi=function(t){var e=1===t,r=2===t,n=3===t,i=4===t,u=6===t,o=7===t,a=5===t||u;return function(s,c,l,f){for(var h,y,v=Ui(s),p=Bi(v),d=Xi(p),w=Fi(c,l),m=0,g=f||Di,k=e?g(s,d):r||o?g(s,0):void 0;d>m;m++)if((a||m in p)&&(y=w(h=p[m],m,v),t))if(e)k[m]=y;else if(y)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:Li(k,h)}else switch(t){case 4:return!1;case 7:Li(k,h)}return u?-1:n||i?i:k}},Ni={forEach:Wi(0),map:Wi(1),filter:Wi(2),some:Wi(3),every:Wi(4),find:Wi(5),findIndex:Wi(6),filterReject:Wi(7)}.map,Gi=Fn.aTypedArray,qi=Fn.getTypedArrayConstructor;(0,Fn.exportTypedArrayMethod)("map",function(t){return Ni(Gi(this),t,arguments.length>1?arguments[1]:void 0,function(t,e){return new(qi(t))(e)})});var Yi=i,Ki=Ee.EXISTS,Ji=d,Hi=Er,$i=Function.prototype,Zi=Ji($i.toString),Qi=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,tu=Ji(Qi.exec);Yi&&!Ki&&Hi($i,"name",{configurable:!0,get:function(){try{return tu(Qi,Zi(this))[1]}catch(t){return""}}});var eu=Zn(function t(){Hn(this,t)},[{key:"isValueType",value:function(){return!0}},{key:"type",get:function(){return this.constructor.type()}},{key:"read",value:function(t,e){throw new Error("Cannot invoke methods on abstract class.")}},{key:"write",value:function(t,e,r){throw new Error("Cannot invoke methods on abstract class.")}},{key:"writeIndex",value:function(t,e){null!=e&&t.write7BitNumber(parseInt(e.getIndex(this))+1)}},{key:"toString",value:function(){return this.type}},{key:"parseTypeList",value:function(){return this.constructor.parseTypeList()}}],[{key:"isTypeOf",value:function(t){return!1}},{key:"hasSubType",value:function(){return!1}},{key:"parseTypeList",value:function(){return[this.type()]}},{key:"type",value:function(){return this.name.slice(0,-6)}}]),ru=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){return t.readUInt32()}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeUInt32(e)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.UInt32Reader":case"System.UInt32":return!0;default:return!1}}}])}(eu),nu=function(t){function e(t){var r;return Hn(this,e),(r=Jn(this,e)).reader=t,r}return ei(e,t),Zn(e,[{key:"read",value:function(t,e){for(var r=(new ru).read(t),n=[],i=0;i<r;i++){var u=this.reader.isValueType()?this.reader.read(t):e.read(t);n.push(u)}return n}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),(new ru).write(t,e.length,null);for(var n=0;n<e.length;n++)this.reader.write(t,e[n],this.reader.isValueType()?null:r)}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"Array<".concat(this.reader.type,">")}},{key:"parseTypeList",value:function(){var t=this.reader.parseTypeList();return["".concat(this.type,":").concat(t.length)].concat(t)}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.ArrayReader"===t}},{key:"hasSubType",value:function(){return!0}}])}(eu),iu=[55296,56320];function uu(t){var e;if("number"==typeof t&&(t=[t]),null===(e=t)||void 0===e||!e.length)throw new Error("Invalid codeset!");return 1===t.length?t[0]:((1023&t[0])<<10)+(1023&t[1])+65536}function ou(t){var e=function(t){for(var e=si({length:t.length},function(e,r){return t.charCodeAt(r)}),r=[],n=0;n<t.length;){var i=e[n];(iu[0]&i)!==iu[0]?(r.push(i),n++):(r.push(uu(e.slice(n,n+2))),n+=2)}return r}(t);return e.reduce(function(t,e){return e<128?t+1:e<2048?t+2:e<65536?t+3:t+4},0)}var au=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=t.read7BitNumber();return t.readString(e)}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=ou(e);t.write7BitNumber(n),t.writeString(e)}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.StringReader":case"System.String":return!0;default:return!1}}}])}(eu),su=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=(new au).read(t);return{export:{type:this.type,data:e}}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),(new au).write(t,e.export.data,null)}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){return"BmFont.XmlSourceReader"===t}}])}(eu),cu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){return Boolean(t.readInt())}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeByte(e)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.BooleanReader":case"System.Boolean":return!0;default:return!1}}}])}(eu),lu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=this._getCharSize(t.peekInt());return t.readString(e)}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeString(e)}},{key:"_getCharSize",value:function(t){return 1+(3841982464>>(t>>3&30)&3)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.CharReader":case"System.Char":return!0;default:return!1}}}])}(eu),fu=function(t){function e(t,r){var n;if(Hn(this,e),null==t||null==r)throw new Error("Cannot create instance of DictionaryReader without Key and Value.");return(n=Jn(this,e)).key=t,n.value=r,n}return ei(e,t),Zn(e,[{key:"read",value:function(t,e){for(var r={},n=(new ru).read(t),i=0;i<n;i++){var u=this.key.isValueType()?this.key.read(t):e.read(t),o=this.value.isValueType()?this.value.read(t):e.read(t);r[u]=o}return r}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeUInt32(Object.keys(e).length);for(var n=0,i=Object.keys(e);n<i.length;n++){var u=i[n];this.key.write(t,u,this.key.isValueType()?null:r),this.value.write(t,e[u],this.value.isValueType()?null:r)}}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"Dictionary<".concat(this.key.type,",").concat(this.value.type,">")}},{key:"parseTypeList",value:function(){return[this.type].concat(this.key.parseTypeList(),this.value.parseTypeList())}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.DictionaryReader"===t}},{key:"hasSubType",value:function(){return!0}}])}(eu),hu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){return t.readDouble()}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeDouble(e)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.DoubleReader":case"System.Double":return!0;default:return!1}}}])}(eu),yu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=(new ru).read(t),r=t.read(e);return{export:{type:this.type,data:r}}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=e.export.data;(new ru).write(t,n.byteLength,null),t.concat(n)}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.EffectReader":case"Microsoft.Xna.Framework.Graphics.Effect":return!0;default:return!1}}}])}(eu),vu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){return t.readInt32()}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeInt32(e)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.Int32Reader":case"Microsoft.Xna.Framework.Content.EnumReader":case"System.Int32":return!0;default:return!1}}}])}(eu),pu=function(t){function e(t){var r;return Hn(this,e),(r=Jn(this,e)).reader=t,r}return ei(e,t),Zn(e,[{key:"read",value:function(t,e){for(var r=(new ru).read(t),n=[],i=0;i<r;i++){var u=this.reader.isValueType()?this.reader.read(t):e.read(t);n.push(u)}return n}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),(new ru).write(t,e.length,null);for(var n=0;n<e.length;n++){var i=e[n];this.reader.write(t,i,this.reader.isValueType()?null:r)}}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"List<".concat(this.reader.type,">")}},{key:"parseTypeList",value:function(){var t=this.reader.parseTypeList();return["".concat(this.type,":").concat(t.length)].concat(t)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.ListReader":case"System.Collections.Generic.List":return!0;default:return!1}}},{key:"hasSubType",value:function(){return!0}}])}(eu),du=function(t){function e(t){var r;return Hn(this,e),(r=Jn(this,e)).reader=t,r}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new cu;return t.peekByte(1)?null===e||this.reader.isValueType()?(r.read(t),this.reader.read(t)):e.read(t):(r.read(t),null)}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;new cu,null!==e?((null===r||this.reader.isValueType())&&t.writeByte(1),this.reader.write(t,e,this.reader.isValueType()?null:r)):t.writeByte(0)}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"Nullable<".concat(this.reader.type,">")}},{key:"parseTypeList",value:function(){var t=this.reader.parseTypeList();return["".concat(this.type,":").concat(t.length)].concat(t)}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.NullableReader"===t}},{key:"hasSubType",value:function(){return!0}}])}(eu),wu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new vu;return{x:e.read(t),y:e.read(t)}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=new vu;n.write(t,e.x,null),n.write(t,e.y,null)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.PointReader":case"Microsoft.Xna.Framework.Point":return!0;default:return!1}}}])}(eu),mu=function(t){function e(t){var r;return Hn(this,e),(r=Jn(this,e)).reader=t,r}return ei(e,t),Zn(e,[{key:"read",value:function(t,e){return this.reader.read(t,e)}},{key:"write",value:function(t,e,r){this.reader.write(t,e,this.reader.isValueType()?null:r)}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"".concat(this.reader.type)}},{key:"parseTypeList",value:function(){return[].concat(this.reader.parseTypeList())}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.ReflectiveReader"===t}},{key:"hasSubType",value:function(){return!0}}])}(eu),gu=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new vu;return{x:e.read(t),y:e.read(t),width:e.read(t),height:e.read(t)}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=new vu;n.write(t,e.x,null),n.write(t,e.y,null),n.write(t,e.width,null),n.write(t,e.height,null)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.RectangleReader":case"Microsoft.Xna.Framework.Rectangle":return!0;default:return!1}}}])}(eu),ku=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){return t.readSingle()}},{key:"write",value:function(t,e,r){this.writeIndex(t,r),t.writeSingle(e)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.SingleReader":case"System.Single":return!0;default:return!1}}}])}(eu),bu=256;function _u(t,e,r,n){for(var i=Array(n),u=0;u<n;u++)i[u]=Array(n);for(var o=0;o<n;o++)for(var a=0;a<n;a++)i[o][a]=1*(o===a);var s=function(t){return[[Math.cos(t),Math.sin(t)],[-Math.sin(t),Math.cos(t)]]}(r);return i[t][t]=s[0][0],i[e][e]=s[1][1],i[t][e]=s[0][1],i[e][t]=s[1][0],i}function xu(t,e,r){var n=e-t;return Math.abs(n)<=1e-12?Math.PI/4:.5*Math.atan(2*r/(e-t))}function Tu(t){for(var e=t.length,r=0,n=[0,1],i=0;i<e;i++)for(var u=i+1;u<e;u++)Math.abs(r)<=Math.abs(t[i][u])&&(r=Math.abs(t[i][u]),n=[i,u]);return[n,r]}function Su(t,e){for(var r=t.length,n=Array(r),i=0;i<r;i++)n[i]=Array(r);for(var u=0;u<r;u++)for(var o=0;o<r;o++){n[u][o]=0;for(var a=0;a<r;a++)for(var s=0;s<r;s++)n[u][o]=n[u][o]+t[a][u]*e[a][s]*t[s][o]}return n}function Ou(t,e){for(var r=t.length,n=Array(r),i=0;i<r;i++)n[i]=Array(r);for(var u=0;u<r;u++)for(var o=0;o<r;o++){n[u][o]=0;for(var a=0;a<r;a++)n[u][o]=n[u][o]+t[u][a]*e[a][o]}return n}function Mu(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-7,r=t.length,n=Array(r),i=Math.abs(e/r),u=Array(r),o=0;o<r;o++)u[o]=Array(r);for(var a=0;a<r;a++)for(var s=0;s<r;s++)u[a][s]=1*(a===s);for(var c=Tu(t);Math.abs(c[1])>=Math.abs(i);){var l=c[0][0],f=c[0][1],h=_u(l,f,xu(t[l][l],t[f][f],t[l][f]),r);t=Su(h,t),u=Ou(u,h),c=Tu(t)}for(var y=0;y<r;y++)n[y]=t[y][y];return function(t,e){var r=t.length;e.length;var n=si({length:r},function(r,n){var i=e.map(function(t){return t[n]});return{value:t[n],vec:i}});n.sort(function(t,e){return e.value-t.value});var i=n.map(function(t){return t.value}),u=n.map(function(t){return t.vec});return[i,u]}(n,u)}var Au=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;Hn(this,t),this._values=[e,r,n]}return Zn(t,[{key:"x",get:function(){return this._values[0]},set:function(t){this._values[0]=t}},{key:"y",get:function(){return this._values[1]},set:function(t){this._values[1]=t}},{key:"z",get:function(){return this._values[2]},set:function(t){this._values[2]=t}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthSq",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"normalized",get:function(){return 0===this.length?null:t.multScalar(this,1/this.length)}},{key:"colorInt",get:function(){return this._values.map(function(t){var e=parseInt(255*t+.5);return Math.max(Math.min(e,255),0)})}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return this._values[0]=t,this._values[1]=e,this._values[2]=r,this}},{key:"toVec4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new zu(this.x,this.y,this.z,t)}},{key:"addVector",value:function(t){return this._values[0]+=t.x,this._values[1]+=t.y,this._values[2]+=t.z,this}},{key:"addScaledVector",value:function(t,e){return this._values[0]+=t.x*e,this._values[1]+=t.y*e,this._values[2]+=t.z*e,this}},{key:"mult",value:function(t){return this._values[0]*=t,this._values[1]*=t,this._values[2]*=t,this}},{key:"multVector",value:function(t){return this._values[0]*=t.x,this._values[1]*=t.y,this._values[2]*=t.z,this}},{key:"clamp",value:function(t,e){var r=function(r){return t>r?t:e<r?e:r};return this._values[0]=r(this._values[0]),this._values[1]=r(this._values[1]),this._values[2]=r(this._values[2]),this}},{key:"clampGrid",value:function(){var t=function(t,e){return ci((0>(r=t)?0:1<r?1:r)*e+.5)/e;var r};return this._values[0]=t(this._values[0],31),this._values[1]=t(this._values[1],63),this._values[2]=t(this._values[2],31),this}},{key:"normalize",value:function(){return this._values[0]/=this.length,this._values[1]/=this.length,this._values[2]/=this.length,this}},{key:"toString",value:function(){return"Vec3( ".concat(this._values.join(", ")," )")}}],[{key:"add",value:function(e,r){return new t(e.x+r.x,e.y+r.y,e.z+r.z)}},{key:"sub",value:function(e,r){return new t(e.x-r.x,e.y-r.y,e.z-r.z)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"multScalar",value:function(e,r){return new t(e.x*r,e.y*r,e.z*r)}},{key:"multVector",value:function(e,r){return new t(e.x*r.x,e.y*r.y,e.z*r.z)}},{key:"interpolate",value:function(e,r,n){var i=t.multScalar(e,1-n),u=t.multScalar(r,n);return t.add(i,u)}}])}(),zu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;Hn(this,t),this._values=[e,r,n,i]}return Zn(t,[{key:"x",get:function(){return this._values[0]},set:function(t){this._values[0]=t}},{key:"y",get:function(){return this._values[1]},set:function(t){this._values[1]=t}},{key:"z",get:function(){return this._values[2]},set:function(t){this._values[2]=t}},{key:"w",get:function(){return this._values[3]},set:function(t){this._values[3]=t}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSq",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"normalized",get:function(){return 0===this.length?null:t.multScalar(this,1/this.length)}},{key:"xyz",get:function(){return new Au(this.x,this.y,this.z)}},{key:"splatX",get:function(){return new t(this.x)}},{key:"splatY",get:function(){return new t(this.y)}},{key:"splatZ",get:function(){return new t(this.z)}},{key:"splatW",get:function(){return new t(this.w)}},{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return this._values[0]=t,this._values[1]=e,this._values[2]=r,this._values[3]=n,this}},{key:"toVec3",value:function(){return this.xyz}},{key:"addVector",value:function(t){return this._values[0]+=t.x,this._values[1]+=t.y,this._values[2]+=t.z,this._values[3]+=t.w,this}},{key:"addScaledVector",value:function(t,e){return this._values[0]+=t.x*e,this._values[1]+=t.y*e,this._values[2]+=t.z*e,this._values[3]+=t.w*e,this}},{key:"subVector",value:function(t){return this._values[0]-=t.x,this._values[1]-=t.y,this._values[2]-=t.z,this._values[3]-=t.w,this}},{key:"mult",value:function(t){return this._values[0]*=t,this._values[1]*=t,this._values[2]*=t,this._values[3]*=t,this}},{key:"multVector",value:function(t){return this._values[0]*=t.x,this._values[1]*=t.y,this._values[2]*=t.z,this._values[3]*=t.w,this}},{key:"reciprocal",value:function(){return this._values[0]=1/this._values[0],this._values[1]=1/this._values[1],this._values[2]=1/this._values[2],this._values[3]=1/this._values[3],this}},{key:"clamp",value:function(t,e){var r=function(r){return t>r?t:e<r?e:r};return this._values[0]=r(this._values[0]),this._values[1]=r(this._values[1]),this._values[2]=r(this._values[2]),this._values[3]=r(this._values[3]),this}},{key:"clampGrid",value:function(){var t=function(t){return 0>t?0:1<t?1:t},e=function(e,r){return ci(t(e)*r+.5)/r};return this._values[0]=e(this._values[0],31),this._values[1]=e(this._values[1],63),this._values[2]=e(this._values[2],31),this._values[3]=t(this._values[3]),this}},{key:"truncate",value:function(){return this._values[0]=ci(this._values[0]),this._values[1]=ci(this._values[1]),this._values[2]=ci(this._values[2]),this._values[3]=ci(this._values[3]),this}},{key:"normalize",value:function(){return this._values[0]/=this.length,this._values[1]/=this.length,this._values[2]/=this.length,this._values[3]/=this.length,this}},{key:"toString",value:function(){return"Vec4( ".concat(this._values.join(", ")," )")}}],[{key:"add",value:function(e,r){return new t(e.x+r.x,e.y+r.y,e.z+r.z,e.w+r.w)}},{key:"sub",value:function(e,r){return new t(e.x-r.x,e.y-r.y,e.z-r.z,e.w-r.w)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}},{key:"multScalar",value:function(e,r){return new t(e.x*r,e.y*r,e.z*r,e.w*r)}},{key:"multVector",value:function(e,r){return new t(e.x*r.x,e.y*r.y,e.z*r.z,e.w*r.w)}},{key:"interpolate",value:function(e,r,n){var i=t.multScalar(e,1-n),u=t.multScalar(r,n);return t.add(i,u)}},{key:"multiplyAdd",value:function(e,r,n){return new t(e.x*r.x+n.x,e.y*r.y+n.y,e.z*r.z+n.z,e.w*r.w+n.w)}},{key:"negativeMultiplySubtract",value:function(e,r,n){return new t(n.x-e.x*r.x,n.y-e.y*r.y,n.z-e.z*r.z,n.w-e.w*r.w)}},{key:"compareAnyLessThan",value:function(t,e){return t.x<e.x||t.y<e.y||t.z<e.z||t.w<e.w}}])}();function Vu(t,e){var r=function(t,e){var r=0,n=t.reduce(function(t,n,i){return r+=e[i],t.addScaledVector(n,e[i]),t},new Au(0));n.mult(1/r);var i=t.reduce(function(t,r,i){var u=e[i],o=Au.sub(r,n);return t[0][0]+=o.x*o.x*u,t[0][1]+=o.x*o.y*u,t[0][2]+=o.x*o.z*u,t[1][1]+=o.y*o.y*u,t[1][2]+=o.y*o.z*u,t[2][2]+=o.z*o.z*u,t},[[0,0,0],[0,0,0],[0,0,0]]);return i[1][0]=i[0][1],i[2][0]=i[0][2],i[2][1]=i[1][2],i}(t,e);return function(t,e,r){if(ri())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&ui(i,r.prototype),i}(Au,Mu(r)[1][0])}var Ru=[[[0,0,0],[0,0,0]],[[0,0,1],[0,0,1]],[[0,0,2],[0,0,2]],[[0,0,3],[0,1,1]],[[0,0,4],[0,1,0]],[[1,0,3],[0,1,1]],[[1,0,2],[0,1,2]],[[1,0,1],[0,2,1]],[[1,0,0],[0,2,0]],[[1,0,1],[0,2,1]],[[1,0,2],[0,2,2]],[[1,0,3],[0,3,1]],[[1,0,4],[0,3,0]],[[2,0,3],[0,3,1]],[[2,0,2],[0,3,2]],[[2,0,1],[0,4,1]],[[2,0,0],[0,4,0]],[[2,0,1],[0,4,1]],[[2,0,2],[0,4,2]],[[2,0,3],[0,5,1]],[[2,0,4],[0,5,0]],[[3,0,3],[0,5,1]],[[3,0,2],[0,5,2]],[[3,0,1],[0,6,1]],[[3,0,0],[0,6,0]],[[3,0,1],[0,6,1]],[[3,0,2],[0,6,2]],[[3,0,3],[0,7,1]],[[3,0,4],[0,7,0]],[[4,0,4],[0,7,1]],[[4,0,3],[0,7,2]],[[4,0,2],[1,7,1]],[[4,0,1],[1,7,0]],[[4,0,0],[0,8,0]],[[4,0,1],[0,8,1]],[[4,0,2],[2,7,1]],[[4,0,3],[2,7,0]],[[4,0,4],[0,9,0]],[[5,0,3],[0,9,1]],[[5,0,2],[3,7,1]],[[5,0,1],[3,7,0]],[[5,0,0],[0,10,0]],[[5,0,1],[0,10,1]],[[5,0,2],[0,10,2]],[[5,0,3],[0,11,1]],[[5,0,4],[0,11,0]],[[6,0,3],[0,11,1]],[[6,0,2],[0,11,2]],[[6,0,1],[0,12,1]],[[6,0,0],[0,12,0]],[[6,0,1],[0,12,1]],[[6,0,2],[0,12,2]],[[6,0,3],[0,13,1]],[[6,0,4],[0,13,0]],[[7,0,3],[0,13,1]],[[7,0,2],[0,13,2]],[[7,0,1],[0,14,1]],[[7,0,0],[0,14,0]],[[7,0,1],[0,14,1]],[[7,0,2],[0,14,2]],[[7,0,3],[0,15,1]],[[7,0,4],[0,15,0]],[[8,0,4],[0,15,1]],[[8,0,3],[0,15,2]],[[8,0,2],[1,15,1]],[[8,0,1],[1,15,0]],[[8,0,0],[0,16,0]],[[8,0,1],[0,16,1]],[[8,0,2],[2,15,1]],[[8,0,3],[2,15,0]],[[8,0,4],[0,17,0]],[[9,0,3],[0,17,1]],[[9,0,2],[3,15,1]],[[9,0,1],[3,15,0]],[[9,0,0],[0,18,0]],[[9,0,1],[0,18,1]],[[9,0,2],[0,18,2]],[[9,0,3],[0,19,1]],[[9,0,4],[0,19,0]],[[10,0,3],[0,19,1]],[[10,0,2],[0,19,2]],[[10,0,1],[0,20,1]],[[10,0,0],[0,20,0]],[[10,0,1],[0,20,1]],[[10,0,2],[0,20,2]],[[10,0,3],[0,21,1]],[[10,0,4],[0,21,0]],[[11,0,3],[0,21,1]],[[11,0,2],[0,21,2]],[[11,0,1],[0,22,1]],[[11,0,0],[0,22,0]],[[11,0,1],[0,22,1]],[[11,0,2],[0,22,2]],[[11,0,3],[0,23,1]],[[11,0,4],[0,23,0]],[[12,0,4],[0,23,1]],[[12,0,3],[0,23,2]],[[12,0,2],[1,23,1]],[[12,0,1],[1,23,0]],[[12,0,0],[0,24,0]],[[12,0,1],[0,24,1]],[[12,0,2],[2,23,1]],[[12,0,3],[2,23,0]],[[12,0,4],[0,25,0]],[[13,0,3],[0,25,1]],[[13,0,2],[3,23,1]],[[13,0,1],[3,23,0]],[[13,0,0],[0,26,0]],[[13,0,1],[0,26,1]],[[13,0,2],[0,26,2]],[[13,0,3],[0,27,1]],[[13,0,4],[0,27,0]],[[14,0,3],[0,27,1]],[[14,0,2],[0,27,2]],[[14,0,1],[0,28,1]],[[14,0,0],[0,28,0]],[[14,0,1],[0,28,1]],[[14,0,2],[0,28,2]],[[14,0,3],[0,29,1]],[[14,0,4],[0,29,0]],[[15,0,3],[0,29,1]],[[15,0,2],[0,29,2]],[[15,0,1],[0,30,1]],[[15,0,0],[0,30,0]],[[15,0,1],[0,30,1]],[[15,0,2],[0,30,2]],[[15,0,3],[0,31,1]],[[15,0,4],[0,31,0]],[[16,0,4],[0,31,1]],[[16,0,3],[0,31,2]],[[16,0,2],[1,31,1]],[[16,0,1],[1,31,0]],[[16,0,0],[4,28,0]],[[16,0,1],[4,28,1]],[[16,0,2],[2,31,1]],[[16,0,3],[2,31,0]],[[16,0,4],[4,29,0]],[[17,0,3],[4,29,1]],[[17,0,2],[3,31,1]],[[17,0,1],[3,31,0]],[[17,0,0],[4,30,0]],[[17,0,1],[4,30,1]],[[17,0,2],[4,30,2]],[[17,0,3],[4,31,1]],[[17,0,4],[4,31,0]],[[18,0,3],[4,31,1]],[[18,0,2],[4,31,2]],[[18,0,1],[5,31,1]],[[18,0,0],[5,31,0]],[[18,0,1],[5,31,1]],[[18,0,2],[5,31,2]],[[18,0,3],[6,31,1]],[[18,0,4],[6,31,0]],[[19,0,3],[6,31,1]],[[19,0,2],[6,31,2]],[[19,0,1],[7,31,1]],[[19,0,0],[7,31,0]],[[19,0,1],[7,31,1]],[[19,0,2],[7,31,2]],[[19,0,3],[8,31,1]],[[19,0,4],[8,31,0]],[[20,0,4],[8,31,1]],[[20,0,3],[8,31,2]],[[20,0,2],[9,31,1]],[[20,0,1],[9,31,0]],[[20,0,0],[12,28,0]],[[20,0,1],[12,28,1]],[[20,0,2],[10,31,1]],[[20,0,3],[10,31,0]],[[20,0,4],[12,29,0]],[[21,0,3],[12,29,1]],[[21,0,2],[11,31,1]],[[21,0,1],[11,31,0]],[[21,0,0],[12,30,0]],[[21,0,1],[12,30,1]],[[21,0,2],[12,30,2]],[[21,0,3],[12,31,1]],[[21,0,4],[12,31,0]],[[22,0,3],[12,31,1]],[[22,0,2],[12,31,2]],[[22,0,1],[13,31,1]],[[22,0,0],[13,31,0]],[[22,0,1],[13,31,1]],[[22,0,2],[13,31,2]],[[22,0,3],[14,31,1]],[[22,0,4],[14,31,0]],[[23,0,3],[14,31,1]],[[23,0,2],[14,31,2]],[[23,0,1],[15,31,1]],[[23,0,0],[15,31,0]],[[23,0,1],[15,31,1]],[[23,0,2],[15,31,2]],[[23,0,3],[16,31,1]],[[23,0,4],[16,31,0]],[[24,0,4],[16,31,1]],[[24,0,3],[16,31,2]],[[24,0,2],[17,31,1]],[[24,0,1],[17,31,0]],[[24,0,0],[20,28,0]],[[24,0,1],[20,28,1]],[[24,0,2],[18,31,1]],[[24,0,3],[18,31,0]],[[24,0,4],[20,29,0]],[[25,0,3],[20,29,1]],[[25,0,2],[19,31,1]],[[25,0,1],[19,31,0]],[[25,0,0],[20,30,0]],[[25,0,1],[20,30,1]],[[25,0,2],[20,30,2]],[[25,0,3],[20,31,1]],[[25,0,4],[20,31,0]],[[26,0,3],[20,31,1]],[[26,0,2],[20,31,2]],[[26,0,1],[21,31,1]],[[26,0,0],[21,31,0]],[[26,0,1],[21,31,1]],[[26,0,2],[21,31,2]],[[26,0,3],[22,31,1]],[[26,0,4],[22,31,0]],[[27,0,3],[22,31,1]],[[27,0,2],[22,31,2]],[[27,0,1],[23,31,1]],[[27,0,0],[23,31,0]],[[27,0,1],[23,31,1]],[[27,0,2],[23,31,2]],[[27,0,3],[24,31,1]],[[27,0,4],[24,31,0]],[[28,0,4],[24,31,1]],[[28,0,3],[24,31,2]],[[28,0,2],[25,31,1]],[[28,0,1],[25,31,0]],[[28,0,0],[28,28,0]],[[28,0,1],[28,28,1]],[[28,0,2],[26,31,1]],[[28,0,3],[26,31,0]],[[28,0,4],[28,29,0]],[[29,0,3],[28,29,1]],[[29,0,2],[27,31,1]],[[29,0,1],[27,31,0]],[[29,0,0],[28,30,0]],[[29,0,1],[28,30,1]],[[29,0,2],[28,30,2]],[[29,0,3],[28,31,1]],[[29,0,4],[28,31,0]],[[30,0,3],[28,31,1]],[[30,0,2],[28,31,2]],[[30,0,1],[29,31,1]],[[30,0,0],[29,31,0]],[[30,0,1],[29,31,1]],[[30,0,2],[29,31,2]],[[30,0,3],[30,31,1]],[[30,0,4],[30,31,0]],[[31,0,3],[30,31,1]],[[31,0,2],[30,31,2]],[[31,0,1],[31,31,1]],[[31,0,0],[31,31,0]]],ju=[[[0,0,0],[0,0,0]],[[0,0,1],[0,1,1]],[[0,0,2],[0,1,0]],[[1,0,1],[0,2,1]],[[1,0,0],[0,2,0]],[[1,0,1],[0,3,1]],[[1,0,2],[0,3,0]],[[2,0,1],[0,4,1]],[[2,0,0],[0,4,0]],[[2,0,1],[0,5,1]],[[2,0,2],[0,5,0]],[[3,0,1],[0,6,1]],[[3,0,0],[0,6,0]],[[3,0,1],[0,7,1]],[[3,0,2],[0,7,0]],[[4,0,1],[0,8,1]],[[4,0,0],[0,8,0]],[[4,0,1],[0,9,1]],[[4,0,2],[0,9,0]],[[5,0,1],[0,10,1]],[[5,0,0],[0,10,0]],[[5,0,1],[0,11,1]],[[5,0,2],[0,11,0]],[[6,0,1],[0,12,1]],[[6,0,0],[0,12,0]],[[6,0,1],[0,13,1]],[[6,0,2],[0,13,0]],[[7,0,1],[0,14,1]],[[7,0,0],[0,14,0]],[[7,0,1],[0,15,1]],[[7,0,2],[0,15,0]],[[8,0,1],[0,16,1]],[[8,0,0],[0,16,0]],[[8,0,1],[0,17,1]],[[8,0,2],[0,17,0]],[[9,0,1],[0,18,1]],[[9,0,0],[0,18,0]],[[9,0,1],[0,19,1]],[[9,0,2],[0,19,0]],[[10,0,1],[0,20,1]],[[10,0,0],[0,20,0]],[[10,0,1],[0,21,1]],[[10,0,2],[0,21,0]],[[11,0,1],[0,22,1]],[[11,0,0],[0,22,0]],[[11,0,1],[0,23,1]],[[11,0,2],[0,23,0]],[[12,0,1],[0,24,1]],[[12,0,0],[0,24,0]],[[12,0,1],[0,25,1]],[[12,0,2],[0,25,0]],[[13,0,1],[0,26,1]],[[13,0,0],[0,26,0]],[[13,0,1],[0,27,1]],[[13,0,2],[0,27,0]],[[14,0,1],[0,28,1]],[[14,0,0],[0,28,0]],[[14,0,1],[0,29,1]],[[14,0,2],[0,29,0]],[[15,0,1],[0,30,1]],[[15,0,0],[0,30,0]],[[15,0,1],[0,31,1]],[[15,0,2],[0,31,0]],[[16,0,2],[1,31,1]],[[16,0,1],[1,31,0]],[[16,0,0],[0,32,0]],[[16,0,1],[2,31,0]],[[16,0,2],[0,33,0]],[[17,0,1],[3,31,0]],[[17,0,0],[0,34,0]],[[17,0,1],[4,31,0]],[[17,0,2],[0,35,0]],[[18,0,1],[5,31,0]],[[18,0,0],[0,36,0]],[[18,0,1],[6,31,0]],[[18,0,2],[0,37,0]],[[19,0,1],[7,31,0]],[[19,0,0],[0,38,0]],[[19,0,1],[8,31,0]],[[19,0,2],[0,39,0]],[[20,0,1],[9,31,0]],[[20,0,0],[0,40,0]],[[20,0,1],[10,31,0]],[[20,0,2],[0,41,0]],[[21,0,1],[11,31,0]],[[21,0,0],[0,42,0]],[[21,0,1],[12,31,0]],[[21,0,2],[0,43,0]],[[22,0,1],[13,31,0]],[[22,0,0],[0,44,0]],[[22,0,1],[14,31,0]],[[22,0,2],[0,45,0]],[[23,0,1],[15,31,0]],[[23,0,0],[0,46,0]],[[23,0,1],[0,47,1]],[[23,0,2],[0,47,0]],[[24,0,1],[0,48,1]],[[24,0,0],[0,48,0]],[[24,0,1],[0,49,1]],[[24,0,2],[0,49,0]],[[25,0,1],[0,50,1]],[[25,0,0],[0,50,0]],[[25,0,1],[0,51,1]],[[25,0,2],[0,51,0]],[[26,0,1],[0,52,1]],[[26,0,0],[0,52,0]],[[26,0,1],[0,53,1]],[[26,0,2],[0,53,0]],[[27,0,1],[0,54,1]],[[27,0,0],[0,54,0]],[[27,0,1],[0,55,1]],[[27,0,2],[0,55,0]],[[28,0,1],[0,56,1]],[[28,0,0],[0,56,0]],[[28,0,1],[0,57,1]],[[28,0,2],[0,57,0]],[[29,0,1],[0,58,1]],[[29,0,0],[0,58,0]],[[29,0,1],[0,59,1]],[[29,0,2],[0,59,0]],[[30,0,1],[0,60,1]],[[30,0,0],[0,60,0]],[[30,0,1],[0,61,1]],[[30,0,2],[0,61,0]],[[31,0,1],[0,62,1]],[[31,0,0],[0,62,0]],[[31,0,1],[0,63,1]],[[31,0,2],[0,63,0]],[[32,0,2],[1,63,1]],[[32,0,1],[1,63,0]],[[32,0,0],[16,48,0]],[[32,0,1],[2,63,0]],[[32,0,2],[16,49,0]],[[33,0,1],[3,63,0]],[[33,0,0],[16,50,0]],[[33,0,1],[4,63,0]],[[33,0,2],[16,51,0]],[[34,0,1],[5,63,0]],[[34,0,0],[16,52,0]],[[34,0,1],[6,63,0]],[[34,0,2],[16,53,0]],[[35,0,1],[7,63,0]],[[35,0,0],[16,54,0]],[[35,0,1],[8,63,0]],[[35,0,2],[16,55,0]],[[36,0,1],[9,63,0]],[[36,0,0],[16,56,0]],[[36,0,1],[10,63,0]],[[36,0,2],[16,57,0]],[[37,0,1],[11,63,0]],[[37,0,0],[16,58,0]],[[37,0,1],[12,63,0]],[[37,0,2],[16,59,0]],[[38,0,1],[13,63,0]],[[38,0,0],[16,60,0]],[[38,0,1],[14,63,0]],[[38,0,2],[16,61,0]],[[39,0,1],[15,63,0]],[[39,0,0],[16,62,0]],[[39,0,1],[16,63,1]],[[39,0,2],[16,63,0]],[[40,0,1],[17,63,1]],[[40,0,0],[17,63,0]],[[40,0,1],[18,63,1]],[[40,0,2],[18,63,0]],[[41,0,1],[19,63,1]],[[41,0,0],[19,63,0]],[[41,0,1],[20,63,1]],[[41,0,2],[20,63,0]],[[42,0,1],[21,63,1]],[[42,0,0],[21,63,0]],[[42,0,1],[22,63,1]],[[42,0,2],[22,63,0]],[[43,0,1],[23,63,1]],[[43,0,0],[23,63,0]],[[43,0,1],[24,63,1]],[[43,0,2],[24,63,0]],[[44,0,1],[25,63,1]],[[44,0,0],[25,63,0]],[[44,0,1],[26,63,1]],[[44,0,2],[26,63,0]],[[45,0,1],[27,63,1]],[[45,0,0],[27,63,0]],[[45,0,1],[28,63,1]],[[45,0,2],[28,63,0]],[[46,0,1],[29,63,1]],[[46,0,0],[29,63,0]],[[46,0,1],[30,63,1]],[[46,0,2],[30,63,0]],[[47,0,1],[31,63,1]],[[47,0,0],[31,63,0]],[[47,0,1],[32,63,1]],[[47,0,2],[32,63,0]],[[48,0,2],[33,63,1]],[[48,0,1],[33,63,0]],[[48,0,0],[48,48,0]],[[48,0,1],[34,63,0]],[[48,0,2],[48,49,0]],[[49,0,1],[35,63,0]],[[49,0,0],[48,50,0]],[[49,0,1],[36,63,0]],[[49,0,2],[48,51,0]],[[50,0,1],[37,63,0]],[[50,0,0],[48,52,0]],[[50,0,1],[38,63,0]],[[50,0,2],[48,53,0]],[[51,0,1],[39,63,0]],[[51,0,0],[48,54,0]],[[51,0,1],[40,63,0]],[[51,0,2],[48,55,0]],[[52,0,1],[41,63,0]],[[52,0,0],[48,56,0]],[[52,0,1],[42,63,0]],[[52,0,2],[48,57,0]],[[53,0,1],[43,63,0]],[[53,0,0],[48,58,0]],[[53,0,1],[44,63,0]],[[53,0,2],[48,59,0]],[[54,0,1],[45,63,0]],[[54,0,0],[48,60,0]],[[54,0,1],[46,63,0]],[[54,0,2],[48,61,0]],[[55,0,1],[47,63,0]],[[55,0,0],[48,62,0]],[[55,0,1],[48,63,1]],[[55,0,2],[48,63,0]],[[56,0,1],[49,63,1]],[[56,0,0],[49,63,0]],[[56,0,1],[50,63,1]],[[56,0,2],[50,63,0]],[[57,0,1],[51,63,1]],[[57,0,0],[51,63,0]],[[57,0,1],[52,63,1]],[[57,0,2],[52,63,0]],[[58,0,1],[53,63,1]],[[58,0,0],[53,63,0]],[[58,0,1],[54,63,1]],[[58,0,2],[54,63,0]],[[59,0,1],[55,63,1]],[[59,0,0],[55,63,0]],[[59,0,1],[56,63,1]],[[59,0,2],[56,63,0]],[[60,0,1],[57,63,1]],[[60,0,0],[57,63,0]],[[60,0,1],[58,63,1]],[[60,0,2],[58,63,0]],[[61,0,1],[59,63,1]],[[61,0,0],[59,63,0]],[[61,0,1],[60,63,1]],[[61,0,2],[60,63,0]],[[62,0,1],[61,63,1]],[[62,0,0],[61,63,0]],[[62,0,1],[62,63,1]],[[62,0,2],[62,63,0]],[[63,0,1],[63,63,1]],[[63,0,0],[63,63,0]]],Iu=[[[0,0,0],[0,0,0]],[[0,0,1],[0,1,1]],[[0,0,2],[0,1,0]],[[0,0,3],[0,1,1]],[[0,0,4],[0,2,1]],[[1,0,3],[0,2,0]],[[1,0,2],[0,2,1]],[[1,0,1],[0,3,1]],[[1,0,0],[0,3,0]],[[1,0,1],[1,2,1]],[[1,0,2],[1,2,0]],[[1,0,3],[0,4,0]],[[1,0,4],[0,5,1]],[[2,0,3],[0,5,0]],[[2,0,2],[0,5,1]],[[2,0,1],[0,6,1]],[[2,0,0],[0,6,0]],[[2,0,1],[2,3,1]],[[2,0,2],[2,3,0]],[[2,0,3],[0,7,0]],[[2,0,4],[1,6,1]],[[3,0,3],[1,6,0]],[[3,0,2],[0,8,0]],[[3,0,1],[0,9,1]],[[3,0,0],[0,9,0]],[[3,0,1],[0,9,1]],[[3,0,2],[0,10,1]],[[3,0,3],[0,10,0]],[[3,0,4],[2,7,1]],[[4,0,4],[2,7,0]],[[4,0,3],[0,11,0]],[[4,0,2],[1,10,1]],[[4,0,1],[1,10,0]],[[4,0,0],[0,12,0]],[[4,0,1],[0,13,1]],[[4,0,2],[0,13,0]],[[4,0,3],[0,13,1]],[[4,0,4],[0,14,1]],[[5,0,3],[0,14,0]],[[5,0,2],[2,11,1]],[[5,0,1],[2,11,0]],[[5,0,0],[0,15,0]],[[5,0,1],[1,14,1]],[[5,0,2],[1,14,0]],[[5,0,3],[0,16,0]],[[5,0,4],[0,17,1]],[[6,0,3],[0,17,0]],[[6,0,2],[0,17,1]],[[6,0,1],[0,18,1]],[[6,0,0],[0,18,0]],[[6,0,1],[2,15,1]],[[6,0,2],[2,15,0]],[[6,0,3],[0,19,0]],[[6,0,4],[1,18,1]],[[7,0,3],[1,18,0]],[[7,0,2],[0,20,0]],[[7,0,1],[0,21,1]],[[7,0,0],[0,21,0]],[[7,0,1],[0,21,1]],[[7,0,2],[0,22,1]],[[7,0,3],[0,22,0]],[[7,0,4],[2,19,1]],[[8,0,4],[2,19,0]],[[8,0,3],[0,23,0]],[[8,0,2],[1,22,1]],[[8,0,1],[1,22,0]],[[8,0,0],[0,24,0]],[[8,0,1],[0,25,1]],[[8,0,2],[0,25,0]],[[8,0,3],[0,25,1]],[[8,0,4],[0,26,1]],[[9,0,3],[0,26,0]],[[9,0,2],[2,23,1]],[[9,0,1],[2,23,0]],[[9,0,0],[0,27,0]],[[9,0,1],[1,26,1]],[[9,0,2],[1,26,0]],[[9,0,3],[0,28,0]],[[9,0,4],[0,29,1]],[[10,0,3],[0,29,0]],[[10,0,2],[0,29,1]],[[10,0,1],[0,30,1]],[[10,0,0],[0,30,0]],[[10,0,1],[2,27,1]],[[10,0,2],[2,27,0]],[[10,0,3],[0,31,0]],[[10,0,4],[1,30,1]],[[11,0,3],[1,30,0]],[[11,0,2],[4,24,0]],[[11,0,1],[1,31,1]],[[11,0,0],[1,31,0]],[[11,0,1],[1,31,1]],[[11,0,2],[2,30,1]],[[11,0,3],[2,30,0]],[[11,0,4],[2,31,1]],[[12,0,4],[2,31,0]],[[12,0,3],[4,27,0]],[[12,0,2],[3,30,1]],[[12,0,1],[3,30,0]],[[12,0,0],[4,28,0]],[[12,0,1],[3,31,1]],[[12,0,2],[3,31,0]],[[12,0,3],[3,31,1]],[[12,0,4],[4,30,1]],[[13,0,3],[4,30,0]],[[13,0,2],[6,27,1]],[[13,0,1],[6,27,0]],[[13,0,0],[4,31,0]],[[13,0,1],[5,30,1]],[[13,0,2],[5,30,0]],[[13,0,3],[8,24,0]],[[13,0,4],[5,31,1]],[[14,0,3],[5,31,0]],[[14,0,2],[5,31,1]],[[14,0,1],[6,30,1]],[[14,0,0],[6,30,0]],[[14,0,1],[6,31,1]],[[14,0,2],[6,31,0]],[[14,0,3],[8,27,0]],[[14,0,4],[7,30,1]],[[15,0,3],[7,30,0]],[[15,0,2],[8,28,0]],[[15,0,1],[7,31,1]],[[15,0,0],[7,31,0]],[[15,0,1],[7,31,1]],[[15,0,2],[8,30,1]],[[15,0,3],[8,30,0]],[[15,0,4],[10,27,1]],[[16,0,4],[10,27,0]],[[16,0,3],[8,31,0]],[[16,0,2],[9,30,1]],[[16,0,1],[9,30,0]],[[16,0,0],[12,24,0]],[[16,0,1],[9,31,1]],[[16,0,2],[9,31,0]],[[16,0,3],[9,31,1]],[[16,0,4],[10,30,1]],[[17,0,3],[10,30,0]],[[17,0,2],[10,31,1]],[[17,0,1],[10,31,0]],[[17,0,0],[12,27,0]],[[17,0,1],[11,30,1]],[[17,0,2],[11,30,0]],[[17,0,3],[12,28,0]],[[17,0,4],[11,31,1]],[[18,0,3],[11,31,0]],[[18,0,2],[11,31,1]],[[18,0,1],[12,30,1]],[[18,0,0],[12,30,0]],[[18,0,1],[14,27,1]],[[18,0,2],[14,27,0]],[[18,0,3],[12,31,0]],[[18,0,4],[13,30,1]],[[19,0,3],[13,30,0]],[[19,0,2],[16,24,0]],[[19,0,1],[13,31,1]],[[19,0,0],[13,31,0]],[[19,0,1],[13,31,1]],[[19,0,2],[14,30,1]],[[19,0,3],[14,30,0]],[[19,0,4],[14,31,1]],[[20,0,4],[14,31,0]],[[20,0,3],[16,27,0]],[[20,0,2],[15,30,1]],[[20,0,1],[15,30,0]],[[20,0,0],[16,28,0]],[[20,0,1],[15,31,1]],[[20,0,2],[15,31,0]],[[20,0,3],[15,31,1]],[[20,0,4],[16,30,1]],[[21,0,3],[16,30,0]],[[21,0,2],[18,27,1]],[[21,0,1],[18,27,0]],[[21,0,0],[16,31,0]],[[21,0,1],[17,30,1]],[[21,0,2],[17,30,0]],[[21,0,3],[20,24,0]],[[21,0,4],[17,31,1]],[[22,0,3],[17,31,0]],[[22,0,2],[17,31,1]],[[22,0,1],[18,30,1]],[[22,0,0],[18,30,0]],[[22,0,1],[18,31,1]],[[22,0,2],[18,31,0]],[[22,0,3],[20,27,0]],[[22,0,4],[19,30,1]],[[23,0,3],[19,30,0]],[[23,0,2],[20,28,0]],[[23,0,1],[19,31,1]],[[23,0,0],[19,31,0]],[[23,0,1],[19,31,1]],[[23,0,2],[20,30,1]],[[23,0,3],[20,30,0]],[[23,0,4],[22,27,1]],[[24,0,4],[22,27,0]],[[24,0,3],[20,31,0]],[[24,0,2],[21,30,1]],[[24,0,1],[21,30,0]],[[24,0,0],[24,24,0]],[[24,0,1],[21,31,1]],[[24,0,2],[21,31,0]],[[24,0,3],[21,31,1]],[[24,0,4],[22,30,1]],[[25,0,3],[22,30,0]],[[25,0,2],[22,31,1]],[[25,0,1],[22,31,0]],[[25,0,0],[24,27,0]],[[25,0,1],[23,30,1]],[[25,0,2],[23,30,0]],[[25,0,3],[24,28,0]],[[25,0,4],[23,31,1]],[[26,0,3],[23,31,0]],[[26,0,2],[23,31,1]],[[26,0,1],[24,30,1]],[[26,0,0],[24,30,0]],[[26,0,1],[26,27,1]],[[26,0,2],[26,27,0]],[[26,0,3],[24,31,0]],[[26,0,4],[25,30,1]],[[27,0,3],[25,30,0]],[[27,0,2],[28,24,0]],[[27,0,1],[25,31,1]],[[27,0,0],[25,31,0]],[[27,0,1],[25,31,1]],[[27,0,2],[26,30,1]],[[27,0,3],[26,30,0]],[[27,0,4],[26,31,1]],[[28,0,4],[26,31,0]],[[28,0,3],[28,27,0]],[[28,0,2],[27,30,1]],[[28,0,1],[27,30,0]],[[28,0,0],[28,28,0]],[[28,0,1],[27,31,1]],[[28,0,2],[27,31,0]],[[28,0,3],[27,31,1]],[[28,0,4],[28,30,1]],[[29,0,3],[28,30,0]],[[29,0,2],[30,27,1]],[[29,0,1],[30,27,0]],[[29,0,0],[28,31,0]],[[29,0,1],[29,30,1]],[[29,0,2],[29,30,0]],[[29,0,3],[29,30,1]],[[29,0,4],[29,31,1]],[[30,0,3],[29,31,0]],[[30,0,2],[29,31,1]],[[30,0,1],[30,30,1]],[[30,0,0],[30,30,0]],[[30,0,1],[30,31,1]],[[30,0,2],[30,31,0]],[[30,0,3],[30,31,1]],[[30,0,4],[31,30,1]],[[31,0,3],[31,30,0]],[[31,0,2],[31,30,1]],[[31,0,1],[31,31,1]],[[31,0,0],[31,31,0]]],Eu=[[[0,0,0],[0,0,0]],[[0,0,1],[0,1,0]],[[0,0,2],[0,2,0]],[[1,0,1],[0,3,1]],[[1,0,0],[0,3,0]],[[1,0,1],[0,4,0]],[[1,0,2],[0,5,0]],[[2,0,1],[0,6,1]],[[2,0,0],[0,6,0]],[[2,0,1],[0,7,0]],[[2,0,2],[0,8,0]],[[3,0,1],[0,9,1]],[[3,0,0],[0,9,0]],[[3,0,1],[0,10,0]],[[3,0,2],[0,11,0]],[[4,0,1],[0,12,1]],[[4,0,0],[0,12,0]],[[4,0,1],[0,13,0]],[[4,0,2],[0,14,0]],[[5,0,1],[0,15,1]],[[5,0,0],[0,15,0]],[[5,0,1],[0,16,0]],[[5,0,2],[1,15,0]],[[6,0,1],[0,17,0]],[[6,0,0],[0,18,0]],[[6,0,1],[0,19,0]],[[6,0,2],[3,14,0]],[[7,0,1],[0,20,0]],[[7,0,0],[0,21,0]],[[7,0,1],[0,22,0]],[[7,0,2],[4,15,0]],[[8,0,1],[0,23,0]],[[8,0,0],[0,24,0]],[[8,0,1],[0,25,0]],[[8,0,2],[6,14,0]],[[9,0,1],[0,26,0]],[[9,0,0],[0,27,0]],[[9,0,1],[0,28,0]],[[9,0,2],[7,15,0]],[[10,0,1],[0,29,0]],[[10,0,0],[0,30,0]],[[10,0,1],[0,31,0]],[[10,0,2],[9,14,0]],[[11,0,1],[0,32,0]],[[11,0,0],[0,33,0]],[[11,0,1],[2,30,0]],[[11,0,2],[0,34,0]],[[12,0,1],[0,35,0]],[[12,0,0],[0,36,0]],[[12,0,1],[3,31,0]],[[12,0,2],[0,37,0]],[[13,0,1],[0,38,0]],[[13,0,0],[0,39,0]],[[13,0,1],[5,30,0]],[[13,0,2],[0,40,0]],[[14,0,1],[0,41,0]],[[14,0,0],[0,42,0]],[[14,0,1],[6,31,0]],[[14,0,2],[0,43,0]],[[15,0,1],[0,44,0]],[[15,0,0],[0,45,0]],[[15,0,1],[8,30,0]],[[15,0,2],[0,46,0]],[[16,0,2],[0,47,0]],[[16,0,1],[1,46,0]],[[16,0,0],[0,48,0]],[[16,0,1],[0,49,0]],[[16,0,2],[0,50,0]],[[17,0,1],[2,47,0]],[[17,0,0],[0,51,0]],[[17,0,1],[0,52,0]],[[17,0,2],[0,53,0]],[[18,0,1],[4,46,0]],[[18,0,0],[0,54,0]],[[18,0,1],[0,55,0]],[[18,0,2],[0,56,0]],[[19,0,1],[5,47,0]],[[19,0,0],[0,57,0]],[[19,0,1],[0,58,0]],[[19,0,2],[0,59,0]],[[20,0,1],[7,46,0]],[[20,0,0],[0,60,0]],[[20,0,1],[0,61,0]],[[20,0,2],[0,62,0]],[[21,0,1],[8,47,0]],[[21,0,0],[0,63,0]],[[21,0,1],[1,62,0]],[[21,0,2],[1,63,0]],[[22,0,1],[10,46,0]],[[22,0,0],[2,62,0]],[[22,0,1],[2,63,0]],[[22,0,2],[3,62,0]],[[23,0,1],[11,47,0]],[[23,0,0],[3,63,0]],[[23,0,1],[4,62,0]],[[23,0,2],[4,63,0]],[[24,0,1],[13,46,0]],[[24,0,0],[5,62,0]],[[24,0,1],[5,63,0]],[[24,0,2],[6,62,0]],[[25,0,1],[14,47,0]],[[25,0,0],[6,63,0]],[[25,0,1],[7,62,0]],[[25,0,2],[7,63,0]],[[26,0,1],[16,45,0]],[[26,0,0],[8,62,0]],[[26,0,1],[8,63,0]],[[26,0,2],[9,62,0]],[[27,0,1],[16,48,0]],[[27,0,0],[9,63,0]],[[27,0,1],[10,62,0]],[[27,0,2],[10,63,0]],[[28,0,1],[16,51,0]],[[28,0,0],[11,62,0]],[[28,0,1],[11,63,0]],[[28,0,2],[12,62,0]],[[29,0,1],[16,54,0]],[[29,0,0],[12,63,0]],[[29,0,1],[13,62,0]],[[29,0,2],[13,63,0]],[[30,0,1],[16,57,0]],[[30,0,0],[14,62,0]],[[30,0,1],[14,63,0]],[[30,0,2],[15,62,0]],[[31,0,1],[16,60,0]],[[31,0,0],[15,63,0]],[[31,0,1],[24,46,0]],[[31,0,2],[16,62,0]],[[32,0,2],[16,63,0]],[[32,0,1],[17,62,0]],[[32,0,0],[25,47,0]],[[32,0,1],[17,63,0]],[[32,0,2],[18,62,0]],[[33,0,1],[18,63,0]],[[33,0,0],[27,46,0]],[[33,0,1],[19,62,0]],[[33,0,2],[19,63,0]],[[34,0,1],[20,62,0]],[[34,0,0],[28,47,0]],[[34,0,1],[20,63,0]],[[34,0,2],[21,62,0]],[[35,0,1],[21,63,0]],[[35,0,0],[30,46,0]],[[35,0,1],[22,62,0]],[[35,0,2],[22,63,0]],[[36,0,1],[23,62,0]],[[36,0,0],[31,47,0]],[[36,0,1],[23,63,0]],[[36,0,2],[24,62,0]],[[37,0,1],[24,63,0]],[[37,0,0],[32,47,0]],[[37,0,1],[25,62,0]],[[37,0,2],[25,63,0]],[[38,0,1],[26,62,0]],[[38,0,0],[32,50,0]],[[38,0,1],[26,63,0]],[[38,0,2],[27,62,0]],[[39,0,1],[27,63,0]],[[39,0,0],[32,53,0]],[[39,0,1],[28,62,0]],[[39,0,2],[28,63,0]],[[40,0,1],[29,62,0]],[[40,0,0],[32,56,0]],[[40,0,1],[29,63,0]],[[40,0,2],[30,62,0]],[[41,0,1],[30,63,0]],[[41,0,0],[32,59,0]],[[41,0,1],[31,62,0]],[[41,0,2],[31,63,0]],[[42,0,1],[32,61,0]],[[42,0,0],[32,62,0]],[[42,0,1],[32,63,0]],[[42,0,2],[41,46,0]],[[43,0,1],[33,62,0]],[[43,0,0],[33,63,0]],[[43,0,1],[34,62,0]],[[43,0,2],[42,47,0]],[[44,0,1],[34,63,0]],[[44,0,0],[35,62,0]],[[44,0,1],[35,63,0]],[[44,0,2],[44,46,0]],[[45,0,1],[36,62,0]],[[45,0,0],[36,63,0]],[[45,0,1],[37,62,0]],[[45,0,2],[45,47,0]],[[46,0,1],[37,63,0]],[[46,0,0],[38,62,0]],[[46,0,1],[38,63,0]],[[46,0,2],[47,46,0]],[[47,0,1],[39,62,0]],[[47,0,0],[39,63,0]],[[47,0,1],[40,62,0]],[[47,0,2],[48,46,0]],[[48,0,2],[40,63,0]],[[48,0,1],[41,62,0]],[[48,0,0],[41,63,0]],[[48,0,1],[48,49,0]],[[48,0,2],[42,62,0]],[[49,0,1],[42,63,0]],[[49,0,0],[43,62,0]],[[49,0,1],[48,52,0]],[[49,0,2],[43,63,0]],[[50,0,1],[44,62,0]],[[50,0,0],[44,63,0]],[[50,0,1],[48,55,0]],[[50,0,2],[45,62,0]],[[51,0,1],[45,63,0]],[[51,0,0],[46,62,0]],[[51,0,1],[48,58,0]],[[51,0,2],[46,63,0]],[[52,0,1],[47,62,0]],[[52,0,0],[47,63,0]],[[52,0,1],[48,61,0]],[[52,0,2],[48,62,0]],[[53,0,1],[56,47,0]],[[53,0,0],[48,63,0]],[[53,0,1],[49,62,0]],[[53,0,2],[49,63,0]],[[54,0,1],[58,46,0]],[[54,0,0],[50,62,0]],[[54,0,1],[50,63,0]],[[54,0,2],[51,62,0]],[[55,0,1],[59,47,0]],[[55,0,0],[51,63,0]],[[55,0,1],[52,62,0]],[[55,0,2],[52,63,0]],[[56,0,1],[61,46,0]],[[56,0,0],[53,62,0]],[[56,0,1],[53,63,0]],[[56,0,2],[54,62,0]],[[57,0,1],[62,47,0]],[[57,0,0],[54,63,0]],[[57,0,1],[55,62,0]],[[57,0,2],[55,63,0]],[[58,0,1],[56,62,1]],[[58,0,0],[56,62,0]],[[58,0,1],[56,63,0]],[[58,0,2],[57,62,0]],[[59,0,1],[57,63,1]],[[59,0,0],[57,63,0]],[[59,0,1],[58,62,0]],[[59,0,2],[58,63,0]],[[60,0,1],[59,62,1]],[[60,0,0],[59,62,0]],[[60,0,1],[59,63,0]],[[60,0,2],[60,62,0]],[[61,0,1],[60,63,1]],[[61,0,0],[60,63,0]],[[61,0,1],[61,62,0]],[[61,0,2],[61,63,0]],[[62,0,1],[62,62,1]],[[62,0,0],[62,62,0]],[[62,0,1],[62,63,0]],[[62,0,2],[63,62,0]],[[63,0,1],[63,63,1]],[[63,0,0],[63,63,0]]];function Cu(t,e){var r=parseInt(t+.5);return r<0?0:r}function Pu(t){return Cu(31*t.x)<<11|Cu(63*t.y)<<5|Cu(31*t.z)}function Fu(t,e,r,n,i){n[i+0]=255&t,n[i+1]=t>>8,n[i+2]=255&e,n[i+3]=e>>8;for(var u=0;u<4;u++)n[i+4+u]=r[4*u+0]|r[4*u+1]<<2|r[4*u+2]<<4|r[4*u+3]<<6}function Bu(t,e,r,n,i){var u,o=Pu(t),a=Pu(e);if(o<=a)u=r.slice();else{var s=[a,o];o=s[0],a=s[1],u=r.map(function(t){return 0===t?1:1===t?0:t})}Fu(o,a,u,n,i)}function Uu(t,e,r,n,i){var u,o=Pu(t),a=Pu(e);if(o<a){var s=[a,o];o=s[0],a=s[1],u=r.map(function(t){return 3&(1^t)})}else u=o==a?new Array(16).fill(0):r.slice();Fu(o,a,u,n,i)}var Xu=Zn(function t(e,r,n){Hn(this,t),this.flags=n,this._count=0,this._transparent=!1,this._remap=[],this._weights=[],this._points=[];for(var i=!!(1&this.flags),u=!!(128&this.flags),o=0;o<16;o++)if(r&1<<o)if(i&&e[4*o+3]<128)this._remap[o]=-1,this._transparent=!0;else for(var a=0;;a++){if(a==o){var s=e[4*o]/255,c=e[4*o+1]/255,l=e[4*o+2]/255,f=(e[4*o+3]+1)/256;this._points[this._count]=new Au(s,c,l),this._weights[this._count]=u?f:1,this._remap[o]=this._count,this._count++;break}if(r&1<<a&&e[4*o]==e[4*a]&&e[4*o+1]==e[4*a+1]&&e[4*o+2]==e[4*a+2]&&(e[4*a+3]>=128||!i)){var h=this._remap[a],y=(e[4*o+3]+1)/256;this._weights[h]+=u?y:1,this._remap[o]=h;break}}else this._remap[o]=-1;for(var v=0;v<this._count;++v)this._weights[v]=Math.sqrt(this._weights[v])},[{key:"transparent",get:function(){return this._transparent}},{key:"count",get:function(){return this._count}},{key:"points",get:function(){return Object.freeze(this._points.slice())}},{key:"weights",get:function(){return Object.freeze(this._weights.slice())}},{key:"remapIndicesSingle",value:function(t,e){var r=this._remap.map(function(e){return-1===e?3:t});e.forEach(function(t,n){return e[n]=r[n]})}},{key:"remapIndices",value:function(t,e){var r=this._remap.map(function(e){return-1===e?3:t[e]});e.forEach(function(t,n){return e[n]=r[n]})}}]),Du=Zn(function t(e){Hn(this,t),this.colors=e,this.flags=e.flags},[{key:"compress",value:function(t,e){1&this.flags?(this.compress3(t,e),this.colors.transparent||this.compress4(t,e)):this.compress4(t,e)}},{key:"compress3",value:function(t,e){}},{key:"compress4",value:function(t,e){}}]),Lu=function(t){function e(t){var r;Hn(this,e),r=Jn(this,e,[t]);var n=t.points[0];return r.color=n.colorInt,r.start=new Au(0),r.end=new Au(0),r.index=0,r.error=1/0,r.bestError=1/0,r}return ei(e,t),Zn(e,[{key:"compressBase",value:function(t,e){if(this.computeEndPoints(t),this.error<this.bestError){var r=new Uint8Array(16);this.colors.remapIndicesSingle(this.index,r),e(this.start,this.end,r),this.bestError=this.error}}},{key:"compress3",value:function(t,e){var r=[Ru,ju,Ru];this.compressBase(r,function(r,n,i){return Bu(r,n,i,t,e)})}},{key:"compress4",value:function(t,e){var r=[Iu,Eu,Iu];this.compressBase(r,function(r,n,i){return Uu(r,n,i,t,e)})}},{key:"computeEndPoints",value:function(t){this.error=1/0;for(var e=0;e<2;e++){for(var r=[],n=0,i=0;i<3;i++){var u=t[i],o=this.color[i];r[i]=u[o][e];var a=r[i][2];n+=a*a}n<this.error&&(this.start=new Au(r[0][0]/31,r[1][0]/63,r[2][0]/31),this.end=new Au(r[0][1]/31,r[1][1]/63,r[2][1]/31),this.index=2*e,this.error=n)}}}])}(Du),Wu=function(t){function e(t){var r;return Hn(this,e),(r=Jn(this,e,[t])).metric=new Au(1),32&r.flags&&r.metric.set(.2126,.7152,.0722),r.start=new Au(0),r.end=new Au(0),r.bestError=1/0,r.computePoints(),r}return ei(e,t),Zn(e,[{key:"compressBase",value:function(t,e){var r=this,n=this.colors.points,i=0,u=n.map(function(e){var n=1/0,u=t.reduce(function(t,i,u){var o=Au.sub(e,i).multVector(r.metric).lengthSq;return o>=n?t:(n=o,u)},0);return i+=n,u});if(i<this.bestError){var o=new Uint8Array(16);this.colors.remapIndices(u,o),e(this.start,this.end,o),this.bestError=i}}},{key:"compress3",value:function(t,e){var r=[this.start.clone(),this.end.clone(),Au.interpolate(this.start,this.end,.5)];this.compressBase(r,function(r,n,i){return Bu(r,n,i,t,e)})}},{key:"compress4",value:function(t,e){var r=[this.start.clone(),this.end.clone(),Au.interpolate(this.start,this.end,1/3),Au.interpolate(this.start,this.end,2/3)];this.compressBase(r,function(r,n,i){return Uu(r,n,i,t,e)})}},{key:"computePoints",value:function(){var t=this.colors,e=t.count,r=t.points,n=t.weights;if(!(e<=0)){var i,u,o,a,s=Vu(r,n);i=u=r[0],o=a=Au.dot(i,s);for(var c=1;c<e;c++){var l=Au.dot(r[c],s);l<o?(i=r[c],o=l):l>a&&(u=r[c],a=l)}this.start=i.clampGrid().clone(),this.end=u.clampGrid().clone()}}}])}(Du),Nu=function(t){function e(t){var r;Hn(this,e);(r=Jn(this,e,[t])).iterationCount=t.flags&bu?8:1,r.bestError=1/0,r.metric=new zu(1),32&r.flags&&r.metric.set(.2126,.7152,.0722,0);var n=r.colors,i=n.points,u=n.weights;return r.principle=Vu(i,u),r.order=new Uint8Array(128),r.pointsWeights=[],r.xSum_wSum=new zu(0),r}return ei(e,t),Zn(e,[{key:"constructOrdering",value:function(t,e){var r=this.makeOrder(t);return this.copyOrderToThisOrder(r,e),!!this.checkOrderUnique(r,e)&&(this.copyOrderWeight(r),!0)}},{key:"compress3",value:function(t,e){this.compressBase(function(t){var e=t[0],r=t[2],n=t[3],i=new zu(.5,.5,.5,1/4),u=zu.multiplyAdd(r,i,e),o=u.splatW,a=zu.multiplyAdd(r,i,n);return{ax:u,aa:o,bx:a,bb:a.splatW,ab:zu.multVector(r,i).splatW}},function(r,n,i){return Bu(r,n,i,t,e)},2)}},{key:"compress4",value:function(t,e){this.compressBase(function(t){var e=t[0],r=t[1],n=t[2],i=t[3],u=new zu(1/3,1/3,1/3,1/9),o=new zu(2/3,2/3,2/3,4/9),a=new zu(2/9),s=zu.multiplyAdd(n,u,zu.multiplyAdd(r,o,e)),c=s.splatW,l=zu.multiplyAdd(r,u,zu.multiplyAdd(n,o,i));return{ax:s,aa:c,bx:l,bb:l.splatW,ab:zu.multVector(a,zu.add(r,n)).splatW}},function(r,n,i){return Uu(r,n,i,t,e)},3)}},{key:"compressBase",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.constructOrdering(this.principle,0);var i={start:new zu(0),end:new zu(0),error:this.bestError,iteration:0,bestI:0,bestJ:0};3===n&&(i.bestK=0);for(var u=function(e,n){var u=t(e),o=r.computeOptimalPoints(u);return o.error<i.error&&(i=ii(ii({},o),n),!0)},o=0;(this.clusterIterate(o,u,n),i.iteration==o)&&++o!=this.iterationCount;){var a=zu.sub(i.end,i.start).xyz;if(!this.constructOrdering(a,o))break}i.error<this.bestError&&this.saveBlock(i,e)}},{key:"makeOrder",value:function(t){var e=this.colors,r=e.count,n=e.points.map(function(e,r){return Au.dot(e,t)});return si({length:r},function(t,e){return e}).sort(function(t,e){return n[t]-n[e]!=0?n[t]-n[e]:t-e})}},{key:"copyOrderToThisOrder",value:function(t,e){var r=this,n=16*e;t.forEach(function(t,e){r.order[n+e]=t})}},{key:"checkOrderUnique",value:function(t,e){for(var r=this.colors.count,n=0;n<e;n++){for(var i=16*n,u=!0,o=0;o<r;o++)if(t[o]!==this.order[i+o]){u=!1;break}if(u)return!1}return!0}},{key:"copyOrderWeight",value:function(t){var e=this.colors,r=e.count,n=e.points,i=e.weights;this.xSum_wSum.set(0);for(var u=0;u<r;u++){var o=t[u],a=n[o].toVec4(1),s=new zu(i[o]),c=zu.multVector(a,s);this.pointsWeights[u]=c,this.xSum_wSum.addVector(c)}}},{key:"computeOptimalPoints",value:function(t){var e=t.ax,r=t.bx,n=t.aa,i=t.bb,u=t.ab,o=zu.negativeMultiplySubtract(u,u,zu.multVector(n,i)).reciprocal(),a=zu.negativeMultiplySubtract(r,u,zu.multVector(e,i)).multVector(o),s=zu.negativeMultiplySubtract(e,u,zu.multVector(r,n)).multVector(o);return a.clampGrid(),s.clampGrid(),{start:a,end:s,error:this.computeError(ii({a:a,b:s},t))}}},{key:"computeError",value:function(t){var e=t.a,r=t.b,n=t.ax,i=t.bx,u=t.aa,o=t.bb,a=t.ab,s=new zu(2),c=zu.multiplyAdd(zu.multVector(e,e),u,zu.multVector(r,r).multVector(o)),l=zu.negativeMultiplySubtract(e,n,zu.multVector(e,r).multVector(a)),f=zu.negativeMultiplySubtract(r,i,l),h=zu.multiplyAdd(s,f,c),y=zu.multVector(h,this.metric);return y.x+y.y+y.z}},{key:"saveBlock",value:function(t,e){for(var r=this.colors.count,n=t.start,i=t.end,u=t.iteration,o=t.error,a=t.bestI,s=t.bestJ,c=t.bestK,l=void 0===c?-1:c,f=16*u,h=new Uint8Array(16),y=function(t){return t<a?0:t<s?2:t<l?3:1},v=0;v<r;v++)h[this.order[f+v]]=y(v);var p=new Uint8Array(16);this.colors.remapIndices(h,p),e(n.xyz,i.xyz,p),this.bestError=o}},{key:"clusterIterate",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=this.colors.count,i=function(e,n,i){var u={bestI:e,bestJ:2===r?i:n,iteration:t};return 3===r&&(u.bestK=i),u},u=new zu(0),o=0;o<n;o++){for(var a=new zu(0),s=o;;){for(var c=0==s?this.pointsWeights[0].clone():new zu(0),l=0==s?1:s;;){if(e([u,a,c,zu.sub(this.xSum_wSum,c).subVector(a).subVector(u)],i(o,s,l)),l==n)break;c.addVector(this.pointsWeights[l]),l++}if(2===r)break;if(s===n)break;a.addVector(this.pointsWeights[s]),s++}u.addVector(this.pointsWeights[o])}}}])}(Du);function Gu(t){var e=Math.floor(t*(15/255)+.5);return e<0?0:e>15?15:e}function qu(t,e,r,n){var i=Yu(t,e,5),u=Yu(t,e,7);i.error<=u.error?function(t,e,r){var n=t.min,i=t.max,u=t.indices;if(n>i){Ju(i,n,u.map(function(t){return 0===t?1:1===t?0:t<=5?7-t:t}),e,r)}else Ju(n,i,u,e,r)}(i,r,n):function(t,e,r){var n=t.min,i=t.max,u=t.indices;if(n>i){Ju(i,n,u.map(function(t){return 0===t?1:1===t?0:9-t}),e,r)}else Ju(n,i,u,e,r)}(u,r,n)}function Yu(t,e,r){var n=function(t,e,r){for(var n=255,i=0,u=0;u<16;u++){if(0!=(e&1<<u)){var o=t[4*u+3];5===r?(0!==o&&o<n&&(n=o),255!==o&&o>i&&(i=o)):(o<n&&(n=o),o>i&&(i=o))}}n>i&&(n=i);i-n<r&&(i=Math.min(n+r,255));i-n<r&&(n=Math.max(i-r,0));return{min:n,max:i}}(t,e,r),i=n.min,u=n.max,o=Ku(i,u,r),a=new Uint8Array(16),s=function(t,e,r,n){for(var i=0,u=0;u<16;++u){if(0!=(e&1<<u)){for(var o=t[4*u+3],a=1/0,s=0,c=0;c<8;++c){var l=o-r[c];(l*=l)<a&&(a=l,s=c)}n[u]=s,i+=a}else n[u]=0}return i}(t,e,o,a);return{min:i,max:u,indices:a,error:s}}function Ku(t,e,r){var n=[t,e].concat(si({length:r-1},function(n,i){return Math.floor(((r-(i+1))*t+(i+1)*e)/r)}));return 5===r&&(n[6]=0,n[7]=255),n}function Ju(t,e,r,n,i){n[i]=t,n[i+1]=e;for(var u=0,o=i+2,a=0;a<2;a++){for(var s=0,c=0;c<8;++c){s|=r[u]<<3*c,u++}for(var l=0;l<3;++l){var f=s>>8*l&255;n[o]=f,o++}}}function Hu(t){var e=t>>11&31,r=t>>5&63,n=31&t;return[e<<3|e>>2,r<<2|r>>4,n<<3|n>>2,255]}function $u(t,e,r){var n=t.map(function(t,n){return Math.floor(t*(1-r)+e[n]*r)});return n[3]=255,n}function Zu(t,e,r,n){for(var i=function(t,e,r){var n=t[e]|t[e+1]<<8,i=t[e+2]|t[e+3]<<8,u=Hu(n),o=Hu(i);return[u,o,$u(u,o,r&&n<=i?.5:1/3),r&&n<=i?[0,0,0,0]:$u(u,o,2/3)]}(e,r,n),u=function(t,e){for(var r=e+4,n=new Uint8Array(16),i=0;i<4;i++){var u=t[r+i];n[4*i+0]=3&u,n[4*i+1]=u>>2&3,n[4*i+2]=u>>4&3,n[4*i+3]=u>>6&3}return n}(e,r),o=0;o<16;o++)for(var a=0;a<4;a++)t[4*o+a]=i[u[o]][a]}function Qu(t){for(var e=0;e<4;e++)for(var r=0;r<4;r++)t(r,e)}function to(t){var e=7&t,r=280&t,n=96&t;return 2!=e&&4!=e&&(e=1),16!=r&&r!=bu&&(r=8),64!=n&&(n=32),e|r|n|128&t}function eo(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.x,i=void 0===n?0:n,u=r.y,o=void 0===u?0:u,a=r.width,s=void 0===a?0:a,c=r.height,l=void 0===c?0:c,f=0;Qu(function(r,n){var u=i+r,a=o+n;if(u<s&&a<l)for(var c=4*(s*a+u),h=0;h<4;h++)t[c+h]=e[f++];else f+=4})}function ro(t,e,r,n,i){var u,o=6&(i=to(i))?8:0,a=new Xu(t,e,i);(1===(u=a).count?new Lu(u):16&u.flags||0==u.count?new Wu(u):new Nu(u)).compress(r,n+o),2&i?function(t,e,r,n){for(var i=0;i<8;i++){var u=Gu(t[8*i+3]),o=Gu(t[8*i+7]);!(e&1<<2*i)&&(u=0),!(e&1<<2*i+1)&&(o=0),r[n+i]=u|o<<4}}(t,e,r,n):4&i&&qu(t,e,r,n)}function no(t,e,r,n){Zu(t,e,r+(6&(n=to(n))?8:0),!!(1&n)),2&n?function(t,e,r){for(var n=0;n<8;++n){var i=e[r+n],u=15&i,o=240&i;t[8*n+3]=u|u<<4,t[8*n+7]=o|o>>4}}(t,e,r):4&n&&function(t,e,r){for(var n=e[r+0],i=e[r+1],u=Ku(n,i,n<=i?5:7),o=new Uint8Array(16),a=0,s=2,c=0;c<2;c++){for(var l=0,f=0;f<3;f++)l|=e[r+s]<<8*f,s++;for(var h=0;h<8;h++){var y=l>>3*h&7;o[a]=y,a++}}for(var v=0;v<16;++v)t[4*v+3]=u[o[v]]}(t,e,r)}function io(t,e,r,n,i){var u=1&(i=to(i))?8:16,o=0;!function(t,e,r){for(var n=0;n<e;n+=4)for(var i=0;i<t;i+=4)r(i,n)}(e,r,function(a,s){var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.x,n=void 0===r?0:r,i=e.y,u=void 0===i?0:i,o=e.width,a=void 0===o?0:o,s=e.height,c=void 0===s?0:s,l=new Uint8Array(64),f=0,h=0;return Qu(function(e,r){var i=n+e,o=u+r;if(i<a&&o<c){for(var s=4*(a*o+i),y=0;y<4;y++)l[h++]=t[s++];f|=1<<4*r+e}else h+=4}),{block:l,mask:f}}(t,{x:a,y:s,width:e,height:r});ro(c.block,c.mask,n,o,i),o+=u})}var uo=1,oo=2,ao=4;function so(t,e,r,n){var i=t instanceof ArrayBuffer?new Uint8Array(t):t,u=function(t,e,r){return r=to(r),Math.floor((t+3)/4)*Math.floor((e+3)/4)*(1&r?8:16)}(e,r,n),o=new Uint8Array(u);return io(i,e,r,o,n),o}function co(t,e,r,n){var i=t instanceof ArrayBuffer?new Uint8Array(t):t,u=new Uint8Array(e*r*4);return function(t,e,r,n,i){for(var u=1&(i=to(i))?8:16,o=0,a=0;a<r;a+=4)for(var s=0;s<e;s+=4){var c=new Uint8Array(64);no(c,n,o,i),eo(t,c,{x:s,y:a,width:e,height:r}),o+=u}}(u,e,r,i,n),u}function lo(t,e,r){return t>>r&Math.pow(2,e)-1}function fo(t,e,r,n){var i=Math.round(t/255*31),u=Math.round(e/255*31),o=Math.round(r/255*31);return Math.round(n/255)<<15|i<<10|u<<5|o}function ho(t){var e=t>>15&1,r=[lo(t,5,10),lo(t,5,5),lo(t,5,0)].map(function(t){return t<<3|t>>2});return[r[0],r[1],r[2],255*e]}var yo=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new vu,r=new ru,n=e.read(t),i=r.read(t),u=r.read(t),o=r.read(t),a=null,s=null;o>1&&console.warn("Found mipcount of ".concat(o,", only the first will be used."));var c=r.read(t);i*u*4>c&&(a=i>>16&65535,s=u>>16&65535,(i&=65535)*(u&=65535)*4!==c&&console.warn("invalid width & height! ".concat(i," x ").concat(u)));var l=t.read(c);if(4==n)l=co(l,i,u,uo);else if(5==n)l=co(l,i,u,oo);else if(6==n)l=co(l,i,u,ao);else if(2==n)l=function(t){for(var e=new Uint8Array(t),r=e.length/2,n=new Uint8Array(4*r),i=0;i<r;i++){var u=ho(e[2*i]|e[2*i+1]<<8);n[4*i]=u[0],n[4*i+1]=u[1],n[4*i+2]=u[2],n[4*i+3]=u[3]}return n}(l);else if(0!=n)throw new Error("Non-implemented Texture2D format type (".concat(n,") found."));l instanceof ArrayBuffer&&(l=new Uint8Array(l));for(var f=0;f<l.length;f+=4){var h=255/l[f+3];l[f]=Math.min(Math.ceil(l[f]*h),255),l[f+1]=Math.min(Math.ceil(l[f+1]*h),255),l[f+2]=Math.min(Math.ceil(l[f+2]*h),255)}var y={format:n,export:{type:this.type,data:l,width:i,height:u}};return null!==a&&(y.additional={usedWidth:a,usedHeight:s}),y}},{key:"write",value:function(t,e,r){var n=new vu,i=new ru;this.writeIndex(t,r);var u=e.export.width,o=e.export.height;null!=e.additional&&(u|=e.additional.usedWidth<<16,o|=e.additional.usedHeight<<16),n.write(t,e.format,null),i.write(t,u,null),i.write(t,o,null),i.write(t,1,null);for(var a=e.export.data,s=0;s<a.length;s+=4){var c=a[s+3]/255;a[s]=Math.floor(a[s]*c),a[s+1]=Math.floor(a[s+1]*c),a[s+2]=Math.floor(a[s+2]*c)}4===e.format?a=so(a,u,o,uo):5===e.format?a=so(a,u,o,oo):6===e.format?a=so(a,u,o,ao):2===e.format&&(a=function(t){for(var e=new Uint8Array(t),r=e.length/4,n=new Uint8Array(2*r),i=0;i<r;i++){var u=fo(e[4*i],e[4*i+1],e[4*i+2],e[4*i+3]);n[2*i]=255&u,n[2*i+1]=u>>8}return n}(a)),i.write(t,a.length,null),t.concat(a)}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.Texture2DReader"===t}}])}(eu),vo=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new ku;return{x:e.read(t),y:e.read(t),z:e.read(t)}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=new ku;n.write(t,e.x,null),n.write(t,e.y,null),n.write(t,e.z,null)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.Vector3Reader":case"Microsoft.Xna.Framework.Vector3":return!0;default:return!1}}}])}(eu),po=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t,e){var r=new vu,n=new ku,i=new du(new lu);return{texture:e.read(t),glyphs:e.read(t),cropping:e.read(t),characterMap:e.read(t),verticalLineSpacing:r.read(t),horizontalSpacing:n.read(t),kerning:e.read(t),defaultCharacter:i.read(t)}}},{key:"write",value:function(t,e,r){var n=new vu,i=new lu,u=new ku,o=new du(i),a=new yo,s=new pu(new gu),c=new pu(i),l=new pu(new vo);this.writeIndex(t,r);try{a.write(t,e.texture,r),t.alloc(1e5),s.write(t,e.glyphs,r),s.write(t,e.cropping,r),c.write(t,e.characterMap,r),n.write(t,e.verticalLineSpacing,null),u.write(t,e.horizontalSpacing,null),l.write(t,e.kerning,r),o.write(t,e.defaultCharacter,null)}catch(t){throw t}}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.SpriteFontReader"===t}},{key:"parseTypeList",value:function(){return["SpriteFont","Texture2D","List<Rectangle>","Rectangle","List<Rectangle>","Rectangle","List<Char>","Char",null,null,"List<Vector3>","Vector3","Nullable<Char>","Char"]}}])}(eu),wo=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=(new vu).read(t),r=t.read(e);return{export:{type:this.type,data:r}}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=e.export.data;(new vu).write(t,n.byteLength,null),t.concat(n)}},{key:"isValueType",value:function(){return!1}}],[{key:"isTypeOf",value:function(t){return"xTile.Pipeline.TideReader"===t}}])}(eu),mo=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new vu,r=new ru,n=e.read(t),i=r.read(t),u=r.read(t),o=r.read(t);o>1&&console.warn("Found mipcount of ".concat(o,", only the first will be used."));var a=r.read(t),s=t.read(a);if(s=new Uint8Array(s),0!=n)throw new Error("Compressed texture format is not supported!");for(var c=0;c<s.length;c+=4){var l=255/s[c+3];s[c]=Math.min(Math.ceil(s[c]*l),255),s[c+1]=Math.min(Math.ceil(s[c+1]*l),255),s[c+2]=Math.min(Math.ceil(s[c+2]*l),255)}return{format:n,export:{type:this.type,data:s,width:i,height:u}}}},{key:"write",value:function(t,e,r){if(0!=e.format)throw new Error("Compressed texture format is not supported!");var n=new vu,i=new ru;this.writeIndex(t,r),e.export.width,e.export.height,n.write(t,e.format,null),i.write(t,e.export.width,null),i.write(t,e.export.height,null),i.write(t,1,null);for(var u=e.export.data,o=0;o<u.length;o+=4){var a=u[o+3]/255;u[o]=Math.floor(u[o]*a),u[o+1]=Math.floor(u[o+1]*a),u[o+2]=Math.floor(u[o+2]*a)}i.write(t,u.length,null),t.concat(u)}},{key:"isValueType",value:function(){return!1}},{key:"type",get:function(){return"Texture2D"}}],[{key:"isTypeOf",value:function(t){return"Microsoft.Xna.Framework.Content.Texture2DReader"===t}},{key:"type",value:function(){return"Texture2D"}}])}(eu),go=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new ku;return{x:e.read(t),y:e.read(t)}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=new ku;n.write(t,e.x,null),n.write(t,e.y,null)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.Vector2Reader":case"Microsoft.Xna.Framework.Vector2":return!0;default:return!1}}}])}(eu),ko=function(t){function e(){return Hn(this,e),Jn(this,e,arguments)}return ei(e,t),Zn(e,[{key:"read",value:function(t){var e=new ku;return{x:e.read(t),y:e.read(t),z:e.read(t),w:e.read(t)}}},{key:"write",value:function(t,e,r){this.writeIndex(t,r);var n=new ku;n.write(t,e.x,null),n.write(t,e.y,null),n.write(t,e.z,null),n.write(t,e.w,null)}}],[{key:"isTypeOf",value:function(t){switch(t){case"Microsoft.Xna.Framework.Content.Vector4Reader":case"Microsoft.Xna.Framework.Vector4":return!0;default:return!1}}}])}(eu);t.ArrayReader=nu,t.BaseReader=eu,t.BmFontReader=su,t.BooleanReader=cu,t.CharReader=lu,t.DictionaryReader=fu,t.DoubleReader=hu,t.EffectReader=yu,t.Int32Reader=vu,t.LightweightTexture2DReader=mo,t.ListReader=pu,t.NullableReader=du,t.PointReader=wu,t.RectangleReader=gu,t.ReflectiveReader=mu,t.SingleReader=ku,t.SpriteFontReader=po,t.StringReader=au,t.TBinReader=wo,t.Texture2DReader=yo,t.UInt32Reader=ru,t.Vector2Reader=go,t.Vector3Reader=vo,t.Vector4Reader=ko,Object.defineProperty(t,"__esModule",{value:!0})});
